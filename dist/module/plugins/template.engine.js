/* graphane - 0.1.0-alpha.12 */ var st="function",ct="undefined",O="object",at="string",Y="array",R="number";var S=t=>typeof t===O,D=t=>typeof t===at,C=t=>typeof t===st,G=t=>typeof t===R&&!isNaN(t),q=t=>typeof t===ct;var T=t=>Array.isArray(t);var J=t=>t.replace(/-([a-z0-9])/g,(e,n)=>n.toUpperCase());var j=new Map;var ft=async function(){}.constructor;function B(t,e,n=!1){let c=`${t.join(",")} ${e}`;if(j.has(c))return j.get(c);let f=new(n?ft:Function)(...t,e);return j.set(c,f),f}function V(t){try{return new Function(`let ${t} = 0`),!0}catch{return!1}}var W="animate",ut="path",X="d",v="transform",Q="rotate",N="translate",K="inherit",Z="finished",lt=[Q,"skewX","skewY"],pt=[N,"width","height","x","y","cx","cy","r","rx","ry","dx","dy"],mt=(t,e)=>["text","tspan"].includes(t)&&["x","y"].includes(e),z=!1;if(window.matchMedia){let t=window.matchMedia("(prefers-reduced-motion: reduce)");z=t.matches,t.addEventListener("change",()=>{z=t.matches})}var dt=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase();function ht(t,e={duration:200},n=null,c=null){let f=this.gSVG,l=r=>{let o=S(r)?{...r}:{duration:r};return z&&(o.duration=0),o.fill="none",o},a=r=>{r=T(r)?r:[r];let o=window.getComputedStyle(this._el),s=[],u=new Set;for(let x of r){let d={};for(let g in x){let h=J(g);d[h]=y(x[g],h),!(h in o)||mt(this.tagName(),h)?u.add(h):h===X?d.d=`${ut}("${d.d}")`:h===v&&(d.transform=$(d.transform))}s.push(d)}return p(u,s),s},i=[],p=(r,o)=>{if(r.size){let s=new KeyframeEffect(null,o).getKeyframes();for(let u of r){let x=f(W).attributeName(u).dur(L.duration+"ms").fill("freeze");if(o.length===1)x.to(o[0][u]);else{let d=[],g=[];for(let h in s){let ot=s[h];u in o[h]&&(d.push(ot.computedOffset),g.push(o[h][u]))}d[0]!==0&&(d.unshift(0),g.unshift(this[u]()||K)),d[d.length-1]!==1&&(d.push(1),g.push(this[u]()||K)),x.keyTimes(d.join(";")).values(g.join(";"))}i.push(x),x.attachTo(this),x.beginElementAt(L.delay||0)}}},$=r=>{D(r)&&(r=JSON.parse("{"+r.replace(/\s*\(\s*/g,":[").replace(/\s*\)\s*/g,"],").split(/\s*,\s*|\s.*/).join(",").replace(/(\w+):/g,'"$1":').replace(/,$/,"")+"}"));let o="";for(let s in r)if(s===Q){let u=m(r[s]);u.length>1&&(o+=`${N}(${y(u[1],N)},${y(u[2],N)}) `),o+=`${s}(${y(u[0],s)}) `,u.length>1&&(o+=`${N}(-${y(u[1],N)},-${y(u[2],N)}) `)}else o+=`${s}(${m(r[s]).map(u=>y(u,s)).join(",")}) `;return o},m=r=>T(r)?r:String(r).split(/\s+|,/),y=(r,o)=>lt.includes(o)?r+"deg":pt.includes(o)?r+"px":r,k=r=>D(r)?r.replace(/(deg)|(px)/g,"").trim():r,U=r=>r.replace(/(path\s*\(\s*["'])|(["']\s*\)\s*$)/g,"").trim().replace(/([a-zA-Z])\s*/g,"$1").replace(/\s+/g,","),b=r=>{let o=/translate\((.*)px,(.*)px\) rotate\((.*)deg\) translate\((.*)px,(.*)px\)\s+/,s=o.exec(r);return s&&Number(s[1])===Number(s[4])*-1&&Number(s[2])===Number(s[5])*-1?r=r.replace(o,`rotate(${s[3]}, ${s[1]}, ${s[2]})`):r=k(r),r},L=l(e),M=a(t),A=this._el.animate(M,L);return A.ready.then(()=>C(n)&&n.call(this,A)),A.finished.then(()=>{let r=M[M.length-1];for(let o in r){let s=dt(o);s.startsWith("text-")?this._el.style[o]=r[o]:o!=="offset"&&o in r&&this._el.setAttribute(s,s===X?U(r[o]):s===v?b(r[o]):k(r[o]))}i.forEach(o=>{o[Z](!0);let s=this._el.querySelectorAll(W),u=this._el.querySelectorAll(`${W}[${Z}]`);s.length===u.length&&s.forEach(x=>x.remove())}),C(c)&&c.call(this,A)}),this}function $t(t){t.extendInstance({animateTo:ht})}var tt=$t;var et=Symbol(),nt=Symbol(),E=Symbol(),I=Symbol(),F=Symbol(),H=Symbol(),xt="unknown",P=[],yt=(t,e,n)=>{throw new Error(t+` in ${e} `+n)},gt=(t=>e=>t[e]||e)("attributeName attributeType baseFrequency calcMode clipPathUnits diffuseConstant edgeMode gradientTransform gradientUnits kernelMatrix kernelUnitLength lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox xChannelSelector yChannelSelector zoomAndPan".split(" ").reduce((t,e)=>(t[e.toLowerCase()]=e,t),{}));function rt(t){if(!t?.el?.parentNode)return;let e=document.createComment(" ref ");t.parentNode().insertBefore(e,t.el),t.remove(),e[H]=t}function Nt(t){let e=t[H];return t.parentNode.insertBefore(e.el,t),t.remove(),e}w({name:"g-content",execute(t,{expression:e,data:n,evalExpression:c}){t.content(c(e,n))}});w({name:"g-if",execute(t,{expression:e,data:n,evalExpression:c}){c(e,n)||rt(t)}});w({name:"g-bind",alias:":",argument:!0,execute(t,{expression:e,argument:n,data:c,evalExpression:f}){n=gt(n);let l={...c,$$:["d","transform"].includes(n)?t["$"+n]:()=>t[n]()};l.$$.dynamic=(i,p=200,$=0)=>{t.animateTo((T(i)?i:[i]).map(m=>S(m)&&"offset"in m?{[n]:m.value,offset:m.offset}:{[n]:m}),{duration:p,delay:$})};let a=f(e,l);if(n==="class"){if(T(a)){t.classList.add(...a.filter(i=>!!i));return}if(S(a)){Object.entries(a).forEach(([i,p])=>{p?t.classList.add(i):t.classList.remove(i)});return}a&&t.classList.add(a);return}if(n==="style"){Object.entries(a).forEach(([i,p])=>t.style[i](p));return}q(a)||t[n](a)}});w({name:"g-on",alias:"@",argument:!0,execute(t,{expression:e,argument:n,data:c,evalExpression:f,error:l,outerCode:a}){t[F]=t[F]||{};let i=t[F][n]=t[F][n]||new Map;i.has(e)&&t.removeEventListener(n,i.get(e));let p=function($){try{let m=f(e,c,t);C(m)&&m.call(t,$)}catch(m){l(m.message,`g-on:${n}="${e}"`,a)}};t.addEventListener(n,p),i.set(e,p),n==="init"&&!t[et]&&(t[et]=!0,t.dispatchEvent(new Event("init")))}});w({name:"g-for",template:!0,execute(t,{expression:e,data:n,error:c}){t[E]=t[E]||[];let f=0;St(e,n,l=>{if(t[E][f])_(t[E][f],l,c,!1);else{let a=t.gSVG("g");t.children().forEach(i=>{a.add(i.cloneNode(!0))}),_(a,l,c),t.before(a.el),a[nt]=!0,t[E].push(a)}f++},l=>{for(;t[E].length>l.length;)t[E].pop().remove()}),rt(t)}});function w({name:t,alias:e,argument:n,template:c,execute:f}){let l=`^(${t}${n?":":""}${e?`|${e})`:")"}${n?"(.*)$":"$"}`,a=new RegExp(l,"i");P.push({name:t,alias:e,argument:n,template:c,execute:f,check:a})}function Et(t){for(let e of P){let n=e.check.exec(t);if(n){let c=n[2];return{...e,argument:c}}}}function bt(t){return t.replace(/[{}()[\]]/g,"").split(",").map(e=>(e.includes(":")?e.split(":")[1].trim():e).trim())}function At(t){return t[Symbol.iterator]?{iterator:[...t],type:Y}:G(t)?{iterator:Array(t<0?0:0|t).fill(0).map((e,n)=>n),type:R}:S(t)?{iterator:Object.entries(t).map(e=>e.reverse()),type:O}:{iterator:t,type:xt}}function it(t,e,n=null){let c=Object.keys(e).filter(V);return B(c,`return ( ${t} ); `).apply(n,c.map(l=>e[l]))}function St(t,e,n,c){let f="__$$iterator",l="__$$callback",a="__$$final",[i,p]=t.split(" of ");i=i.trim(),p=p.trim();let $=it(p,e)||[],{iterator:m,type:y}=At($);y===O&&!i.startsWith("[")&&(i=`[${i.replace(/(^\()|(\)$)/g,"")}]`);let k=bt(i),U=i.startsWith("(")?i:`(${i})`,b=Object.keys(e).filter(V),L=` ${f}.forEach(${U} => { ${l}({${b}${b.length?",":""}${k.join(",")}}); }); ${a}(${f}); `;return B([...b,f,l,a],L)(...b.map(A=>e[A]),m,n,c)}function _(t,e,n,c=!0){if(c&&t[nt])return;let f=t.outerHTML();t[I]=t[I]||[];let l=t.attributes();for(let i of[...l]){let p=i.name,$=Et(p);$&&(t[I].push({...$,expression:i.value}),t.removeAttribute(p))}let a=!1;for(let i of t[I]){try{i.execute(t,{...i,data:e,evalExpression:it,error:n,outerCode:f})}catch(p){n(p.message,`${i.name}${i.argument?":"+i.argument:""}="${i.expression}"`,f)}a=i.template||a}if(!a)for(let i of t.childNodes())i.el[H]?_(Nt(i.el),e,n):i.el?.nodeType===1&&_(i,e,n)}function Tt(t={},e=yt){_(this,t,e),this.dispatchEvent(new Event("render"))}function wt(){return this.outerHTML().replaceAll("<!-- ref -->","")}function Lt(t){t.install(tt),t.extendInstance({render:Tt,source:wt}),t.extendSetup({extendTemplate:{defineDirective:w,obtainDirective(e){return P.find(n=>n.name===e)}}})}var Dt=Lt;export{Dt as default};