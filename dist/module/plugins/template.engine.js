/* graphane - 1.0.0-beta.next */ var ft="function",lt="undefined",I="object",pt="string",J="array",V="number";var A=t=>typeof t===I,O=t=>typeof t===pt,_=t=>typeof t===ft,X=t=>typeof t===V&&!isNaN(t),j=t=>!Number.isNaN(t),B=t=>typeof t===lt;var w=t=>Array.isArray(t);var K=t=>t.replace(/-([a-z0-9])/g,(e,n)=>n.toUpperCase());var W=new Map;var mt=async function(){}.constructor;function Y(t,e,n=!1){let a=`${t.join(",")} ${e}`;if(W.has(a))return W.get(a);let f=new(n?mt:Function)(...t,e);return W.set(a,f),f}function z(t){try{return new Function(`let ${t} = 0`),!0}catch{return!1}}var H="animate",dt="path",Z="d",Q="transform",nt="rotate",b="translate",tt="inherit",et="finished",ht=[nt,"skewX","skewY"],$t=[b,"width","height","x","y","cx","cy","r","rx","ry","dx","dy"],xt=(t,e)=>["text","tspan"].includes(t)&&["x","y"].includes(e),P=!1;if(window.matchMedia){let t=window.matchMedia("(prefers-reduced-motion: reduce)");P=t.matches,t.addEventListener("change",()=>{P=t.matches})}var yt=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase();function gt(t,e={duration:200},n=null,a=null){let f=this.gSVG,l=i=>{let s=A(i)?{...i}:{duration:i};return P&&(s.duration=0),s.fill="none",s},c=i=>{i=w(i)?i:[i];let s=window.getComputedStyle(this._el),u=[],p=new Set;for(let x of i){let h={};for(let E in x){let $=K(E);h[$]=g(x[E],$),!($ in s)||xt(this.tagName(),$)?p.add($):$===Z?h.d=`${dt}("${h.d}")`:$===Q&&(h.transform=d(h.transform))}u.push(h)}return o(p,u),u},r=[],o=(i,s)=>{if(i.size){let u=new KeyframeEffect(null,s).getKeyframes();for(let p of i){let x=f(H).attributeName(p).dur(C.duration+"ms").fill("freeze");if(s.length===1)x.to(s[0][p]);else{let h=[],E=[];for(let $ in u){let ut=u[$];p in s[$]&&(h.push(ut.computedOffset),E.push(s[$][p]))}h[0]!==0&&(h.unshift(0),E.unshift(this[p]()||tt)),h[h.length-1]!==1&&(h.push(1),E.push(this[p]()||tt)),x.keyTimes(h.join(";")).values(E.join(";"))}r.push(x),x.attachTo(this),x.beginElementAt(C.delay||0)}}},d=i=>{O(i)&&(i=JSON.parse("{"+i.replace(/\s*\(\s*/g,":[").replace(/\s*\)\s*/g,"],").split(/\s*,\s*|\s.*/).join(",").replace(/(\w+):/g,'"$1":').replace(/,$/,"")+"}"));let s="";for(let u in i)if(u===nt){let p=m(i[u]);p.length>1&&(s+=`${b}(${g(p[1],b)},${g(p[2],b)}) `),s+=`${u}(${g(p[0],u)}) `,p.length>1&&(s+=`${b}(-${g(p[1],b)},-${g(p[2],b)}) `)}else s+=`${u}(${m(i[u]).map(p=>g(p,u)).join(",")}) `;return s},m=i=>w(i)?i:String(i).split(/\s+|,/),g=(i,s)=>ht.includes(s)?i+"deg":$t.includes(s)?i+"px":i,k=i=>O(i)?i.replace(/(deg)|(px)/g,"").trim():i,M=i=>i.replace(/(path\s*\(\s*["'])|(["']\s*\)\s*$)/g,"").trim().replace(/([a-zA-Z])\s*/g,"$1").replace(/\s+/g,","),v=i=>{let s=/translate\((.*)px,(.*)px\) rotate\((.*)deg\) translate\((.*)px,(.*)px\)\s+/,u=s.exec(i);return u&&Number(u[1])===Number(u[4])*-1&&Number(u[2])===Number(u[5])*-1?i=i.replace(s,`rotate(${u[3]}, ${u[1]}, ${u[2]})`):i=k(i),i},C=l(e),N=c(t),S=this._el.animate(N,C);return S.ready.then(()=>_(n)&&n.call(this,S)),S.finished.then(()=>{let i=N[N.length-1];for(let s in i){let u=yt(s);u.startsWith("text-")?this._el.style[s]=i[s]:s!=="offset"&&s in i&&this._el.setAttribute(u,u===Z?M(i[s]):u===Q?v(i[s]):k(i[s]))}r.forEach(s=>{s[et](!0);let u=this._el.querySelectorAll(H),p=this._el.querySelectorAll(`${H}[${et}]`);u.length===p.length&&u.forEach(x=>x.remove())}),_(a)&&a.call(this,S)}),this}function Nt(t){t.extendInstance({animateTo:gt})}var rt=Nt;var it=Symbol(),st=Symbol(),y=Symbol(),T=Symbol(),U=Symbol(),q=Symbol(),ot=Symbol(),G="error",Et="unknown",F={},D=(t,e)=>new Error(`The expression "${t}" return ${e} value`),At=(t,e,n)=>{throw new Error(t+` in ${e} `+n)},bt=(t=>e=>t[e]||e)("attributeName attributeType baseFrequency calcMode clipPathUnits diffuseConstant edgeMode gradientTransform gradientUnits kernelMatrix kernelUnitLength lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox xChannelSelector yChannelSelector zoomAndPan".split(" ").reduce((t,e)=>(t[e.toLowerCase()]=e,t),{}));function ct(t){if(!t?.el?.parentNode)return null;let e=document.createComment(" ref ");return t.parentNode().insertBefore(e,t.el),t.remove(),e[q]=t,e}function St(t){let e=t[q];return t.parentNode.insertBefore(e.el,t),t.remove(),e}L({name:"g-content",exec(t,{expr:e,data:n,evalExpr:a}){let f={...n,$$:{fromURL:async o=>{let d=await fetch(o);if(d.status===200)return d.text();console.warn(`Failed to load URL: ${o} (${d.status})`)},currentContent:t.content}},l=a(e,f),c=new CustomEvent("load",{bubbles:!0,detail:t}),r=o=>B(o)?"":o;A(l)&&l.then?l.then(o=>{t.content(r(o)),t.dispatchEvent(c)}):(t.content(r(l)),t.dispatchEvent(c))}});L({name:"g-if",exec(t,{expr:e,data:n,evalExpr:a}){if(!a(e,n))return t[y]&&(t[y].forEach(f=>f.remove()),delete t[y]),ct(t)}});L({name:"g-bind",alias:":",arg:!0,exec(t,{expr:e,arg:n,data:a,evalExpr:f}){n=bt(n);let l={...a,$$:["d","transform"].includes(n)?t["$"+n]:{}};l.$$.currentValue=t[n],l.$$.dynamic=(r,o=200,d=0)=>(t.animateTo((w(r)?r:[r]).map(m=>A(m)&&"offset"in m?{[n]:m.value,offset:m.offset}:{[n]:m}),{duration:o,delay:d}),ot);let c=f(e,l);if(B(c))throw D(e,"undefined");if(n==="class"){if(w(c)){t.classList.add(...c.filter(r=>!!r));return}if(A(c)){Object.entries(c).forEach(([r,o])=>{o?t.classList.add(r):t.classList.remove(r)});return}c&&t.classList.add(c);return}if(n==="style"){Object.entries(c).forEach(([r,o])=>t.style[r](o));return}c!==ot&&t[n](c)}});L({name:"g-on",alias:"@",arg:!0,exec(t,{expr:e,arg:n,data:a,evalExpr:f,error:l,code:c}){t[U]=t[U]||{};let r=t[U][n]=t[U][n]||new Map;r.has(e)&&t.removeEventListener(n,r.get(e));let o=function(d){try{let m=f(e,a,t);_(m)&&m.call(t,d)}catch(m){l(m.message,{directive:"g-on",argument:n,expression:e,toString(){return`g-on:${n}="${e}"`}},c)}};t.addEventListener(n,o),r.set(e,o),n==="init"&&!t[it]&&(t[it]=!0,t.dispatchEvent(new Event("init")))}});L({name:"g-for",tmpl:!0,exec(t,{expr:e,data:n,error:a}){t[y]=t[y]||[];let f=t.gSVG(ct(t)),l=0;return Ct(e,n,c=>{if(t[y][l])R(t[y][l],c,a,!1);else{let r=t.gSVG(t.tagName());r[T]=t[T].filter(o=>o.name!=="g-for"),[...t.attributes()].forEach(o=>{o.name!=="g-for"&&r.setAttribute(o.name,o.value)}),t.children().forEach(o=>{r.add(o.cloneNode(!0))}),f.before(r),R(r,c,a),r[st]=!0,t[y].push(r)}l++},c=>{for(;t[y].length>c.length;)t[y].pop().remove()}),!0}});function L({name:t,alias:e,arg:n,tmpl:a,exec:f}){let l=`^(${t}${n?":":""}${e?`|${e})`:")"}${n?"(.*)$":"$"}`,c=new RegExp(l,"i");F[t]={name:t,alias:e,arg:n,tmpl:a,exec:f,check:c}}function wt(t){for(let e in F){let n=F[e],a=n.check.exec(t);if(a){let f=a[2];return{...n,arg:f}}}}function Tt(t){return t.replace(/[{}()[\]]/g,"").split(",").map(e=>(e.includes(":")?e.split(":")[1].trim():e).trim())}function Lt(t,e){return t[Symbol.iterator]?e==="of"?{iterator:[...t],type:J}:{type:G}:X(t)?{iterator:Array(t<0?0:0|t).fill(0).map((n,a)=>a+(e==="of"?0:1)),type:V}:A(t)?e==="in"?{iterator:Object.entries(t).map(n=>n.reverse()),type:I}:{type:G}:{iterator:t,type:Et}}function at(t,e,n=null){let a=Object.keys(e).filter(z),l=Y(a,`return ( ${t} ); `).apply(n,a.map(c=>e[c]));if(!j(l))throw D(t,"NaN (Not a Number)");return l}function Ct(t,e,n,a){let f="__$$i",l="__$$c",c="__$$f",r=t.match(/^\s*([\s\S]+?)\s*(of|in)\s*([\s\S]+?)\s*$/);if(!r)throw D(t,'an invalid "g-for" expression');let[,o,d,m]=r;o=o.trim(),m=m.trim();let g=at(m,e)||[],{iterator:k,type:M}=Lt(g,d);if(M===G)throw D(t,'an invalid "g-for" expression');M===I&&!o.startsWith("[")&&(o=`[${o.replace(/(^\()|(\)$)/g,"")}]`);let v=Tt(o),C=o.startsWith("(")?o:`(${o})`,N=Object.keys(e).filter(z),S=` ${f}.forEach(${C} => { ${l}({${N}${N.length?",":""}${v.join(",")}}); }); ${c}(${f}); `;return Y([...N,f,l,c],S)(...N.map(s=>e[s]),k,n,a)}function R(t,e,n,a=!0){if(a&&t[st])return;let f=t.outerHTML();t[T]=t[T]||[];let l=t.attributes();for(let r of[...l]){let o=r.name,d=wt(o);d&&(t[T].push({...d,expr:r.value}),t.removeAttribute(o))}let c=!1;for(let r of t[T]){c=r.tmpl||c;try{if(r.exec(t,{...r,data:e,evalExpr:at,error:n,code:f}))return}catch(o){n(o.message,{directive:r.name,argument:r.arg,expression:r.expr,toString(){return`${r.name}${r.arg?":"+r.arg:""}="${r.expr}"`}},f)}}if(!c)for(let r of t.childNodes())r.el[q]?R(St(r.el),e,n):r.el?.nodeType===1&&R(r,e,n)}function _t(t={},e=At){R(this,t,e),this.dispatchEvent(new Event("render"))}function Rt(){return this.outerHTML().replaceAll("<!-- ref -->","")}function kt(t){t.install(rt),t.extendInstance({render:_t,source:Rt}),t.extendSetup({extendTemplate:{defineDirective:L,getDirective(e){return F[e]}}})}var Wt=kt;export{Wt as default};