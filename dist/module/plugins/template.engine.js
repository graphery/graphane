/* graphane - 1.0.0-beta.4 */ var at="function",ut="undefined",I="object",ft="string",P="array",O="number";var S=t=>typeof t===I,V=t=>typeof t===ft,C=t=>typeof t===at,G=t=>typeof t===O&&!isNaN(t),v=t=>typeof t===ut;var w=t=>Array.isArray(t);var q=t=>t.replace(/-([a-z0-9])/g,(e,n)=>n.toUpperCase());var B=new Map;var lt=async function(){}.constructor;function W(t,e,n=!1){let a=`${t.join(",")} ${e}`;if(B.has(a))return B.get(a);let l=new(n?lt:Function)(...t,e);return B.set(a,l),l}function Y(t){try{return new Function(`let ${t} = 0`),!0}catch{return!1}}var j="animate",pt="path",J="d",X="transform",Q="rotate",N="translate",K="inherit",Z="finished",mt=[Q,"skewX","skewY"],dt=[N,"width","height","x","y","cx","cy","r","rx","ry","dx","dy"],ht=(t,e)=>["text","tspan"].includes(t)&&["x","y"].includes(e),z=!1;if(window.matchMedia){let t=window.matchMedia("(prefers-reduced-motion: reduce)");z=t.matches,t.addEventListener("change",()=>{z=t.matches})}var $t=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase();function xt(t,e={duration:200},n=null,a=null){let l=this.gSVG,u=i=>{let s=S(i)?{...i}:{duration:i};return z&&(s.duration=0),s.fill="none",s},o=i=>{i=w(i)?i:[i];let s=window.getComputedStyle(this._el),c=[],p=new Set;for(let x of i){let h={};for(let g in x){let $=q(g);h[$]=y(x[g],$),!($ in s)||ht(this.tagName(),$)?p.add($):$===J?h.d=`${pt}("${h.d}")`:$===X&&(h.transform=d(h.transform))}c.push(h)}return f(p,c),c},r=[],f=(i,s)=>{if(i.size){let c=new KeyframeEffect(null,s).getKeyframes();for(let p of i){let x=l(j).attributeName(p).dur(L.duration+"ms").fill("freeze");if(s.length===1)x.to(s[0][p]);else{let h=[],g=[];for(let $ in c){let ct=c[$];p in s[$]&&(h.push(ct.computedOffset),g.push(s[$][p]))}h[0]!==0&&(h.unshift(0),g.unshift(this[p]()||K)),h[h.length-1]!==1&&(h.push(1),g.push(this[p]()||K)),x.keyTimes(h.join(";")).values(g.join(";"))}r.push(x),x.attachTo(this),x.beginElementAt(L.delay||0)}}},d=i=>{V(i)&&(i=JSON.parse("{"+i.replace(/\s*\(\s*/g,":[").replace(/\s*\)\s*/g,"],").split(/\s*,\s*|\s.*/).join(",").replace(/(\w+):/g,'"$1":').replace(/,$/,"")+"}"));let s="";for(let c in i)if(c===Q){let p=m(i[c]);p.length>1&&(s+=`${N}(${y(p[1],N)},${y(p[2],N)}) `),s+=`${c}(${y(p[0],c)}) `,p.length>1&&(s+=`${N}(-${y(p[1],N)},-${y(p[2],N)}) `)}else s+=`${c}(${m(i[c]).map(p=>y(p,c)).join(",")}) `;return s},m=i=>w(i)?i:String(i).split(/\s+|,/),y=(i,s)=>mt.includes(s)?i+"deg":dt.includes(s)?i+"px":i,k=i=>V(i)?i.replace(/(deg)|(px)/g,"").trim():i,D=i=>i.replace(/(path\s*\(\s*["'])|(["']\s*\)\s*$)/g,"").trim().replace(/([a-zA-Z])\s*/g,"$1").replace(/\s+/g,","),b=i=>{let s=/translate\((.*)px,(.*)px\) rotate\((.*)deg\) translate\((.*)px,(.*)px\)\s+/,c=s.exec(i);return c&&Number(c[1])===Number(c[4])*-1&&Number(c[2])===Number(c[5])*-1?i=i.replace(s,`rotate(${c[3]}, ${c[1]}, ${c[2]})`):i=k(i),i},L=u(e),M=o(t),A=this._el.animate(M,L);return A.ready.then(()=>C(n)&&n.call(this,A)),A.finished.then(()=>{let i=M[M.length-1];for(let s in i){let c=$t(s);c.startsWith("text-")?this._el.style[s]=i[s]:s!=="offset"&&s in i&&this._el.setAttribute(c,c===J?D(i[s]):c===X?b(i[s]):k(i[s]))}r.forEach(s=>{s[Z](!0);let c=this._el.querySelectorAll(j),p=this._el.querySelectorAll(`${j}[${Z}]`);c.length===p.length&&c.forEach(x=>x.remove())}),C(a)&&a.call(this,A)}),this}function yt(t){t.extendInstance({animateTo:xt})}var tt=yt;var et=Symbol(),rt=Symbol(),E=Symbol(),R=Symbol(),U=Symbol(),H=Symbol(),nt=Symbol(),gt="unknown",F={},it=(t,e)=>new Error(`The expression "${t}" return ${e} value`),Nt=(t,e,n)=>{throw new Error(t+` in ${e} `+n)},Et=(t=>e=>t[e]||e)("attributeName attributeType baseFrequency calcMode clipPathUnits diffuseConstant edgeMode gradientTransform gradientUnits kernelMatrix kernelUnitLength lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox xChannelSelector yChannelSelector zoomAndPan".split(" ").reduce((t,e)=>(t[e.toLowerCase()]=e,t),{}));function ot(t){if(!t?.el?.parentNode)return;let e=document.createComment(" ref ");t.parentNode().insertBefore(e,t.el),t.remove(),e[H]=t}function bt(t){let e=t[H];return t.parentNode.insertBefore(e.el,t),t.remove(),e}T({name:"g-content",exec(t,{expr:e,data:n,evalExpr:a}){let l={...n,$$:{fromURL:async f=>{let d=await fetch(f);if(d.status===200)return d.text();console.warn(`Failed to load URL: ${f} (${d.status})`)},currentContent:t.content}},u=a(e,l),o=new CustomEvent("load",{bubbles:!0,detail:t}),r=f=>v(f)?"":f;typeof u=="object"&&u.then?u.then(f=>{t.content(r(f)),t.dispatchEvent(o)}):(t.content(r(u)),t.dispatchEvent(o))}});T({name:"g-if",exec(t,{expr:e,data:n,evalExpr:a}){a(e,n)||ot(t)}});T({name:"g-bind",alias:":",arg:!0,exec(t,{expr:e,arg:n,data:a,evalExpr:l}){n=Et(n);let u={...a,$$:["d","transform"].includes(n)?t["$"+n]:{}};u.$$.currentValue=t[n],u.$$.dynamic=(r,f=200,d=0)=>(t.animateTo((w(r)?r:[r]).map(m=>S(m)&&"offset"in m?{[n]:m.value,offset:m.offset}:{[n]:m}),{duration:f,delay:d}),nt);let o=l(e,u);if(v(o))throw it(e,"undefined");if(n==="class"){if(w(o)){t.classList.add(...o.filter(r=>!!r));return}if(S(o)){Object.entries(o).forEach(([r,f])=>{f?t.classList.add(r):t.classList.remove(r)});return}o&&t.classList.add(o);return}if(n==="style"){Object.entries(o).forEach(([r,f])=>t.style[r](f));return}o!==nt&&t[n](o)}});T({name:"g-on",alias:"@",arg:!0,exec(t,{expr:e,arg:n,data:a,evalExpr:l,error:u,code:o}){t[U]=t[U]||{};let r=t[U][n]=t[U][n]||new Map;r.has(e)&&t.removeEventListener(n,r.get(e));let f=function(d){try{let m=l(e,a,t);C(m)&&m.call(t,d)}catch(m){u(m.message,{directive:"g-on",argument:n,expression:e,toString(){return`g-on:${n}="${e}"`}},o)}};t.addEventListener(n,f),r.set(e,f),n==="init"&&!t[et]&&(t[et]=!0,t.dispatchEvent(new Event("init")))}});T({name:"g-for",tmpl:!0,exec(t,{expr:e,data:n,error:a}){t[E]=t[E]||[];let l=0;Tt(e,n,u=>{if(t[E][l])_(t[E][l],u,a,!1);else{let o=t.gSVG("g");t.children().forEach(r=>{o.add(r.cloneNode(!0))}),_(o,u,a),t.before(o.el),o[rt]=!0,t[E].push(o)}l++},u=>{for(;t[E].length>u.length;)t[E].pop().remove()}),ot(t)}});function T({name:t,alias:e,arg:n,tmpl:a,exec:l}){let u=`^(${t}${n?":":""}${e?`|${e})`:")"}${n?"(.*)$":"$"}`,o=new RegExp(u,"i");F[t]={name:t,alias:e,arg:n,tmpl:a,exec:l,check:o}}function At(t){for(let e in F){let n=F[e],a=n.check.exec(t);if(a){let l=a[2];return{...n,arg:l}}}}function St(t){return t.replace(/[{}()[\]]/g,"").split(",").map(e=>(e.includes(":")?e.split(":")[1].trim():e).trim())}function wt(t){return t[Symbol.iterator]?{iterator:[...t],type:P}:G(t)?{iterator:Array(t<0?0:0|t).fill(0).map((e,n)=>n),type:O}:S(t)?{iterator:Object.entries(t).map(e=>e.reverse()),type:I}:{iterator:t,type:gt}}function st(t,e,n=null){let a=Object.keys(e).filter(Y),u=W(a,`return ( ${t} ); `).apply(n,a.map(o=>e[o]));if(Number.isNaN(u))throw it(t,"NaN (Not a Number)");return u}function Tt(t,e,n,a){let l="__$$iterator",u="__$$callback",o="__$$final",[r,f]=t.split(" of ");r=r.trim(),f=f.trim();let d=st(f,e)||[],{iterator:m,type:y}=wt(d);y===I&&!r.startsWith("[")&&(r=`[${r.replace(/(^\()|(\)$)/g,"")}]`);let k=St(r),D=r.startsWith("(")?r:`(${r})`,b=Object.keys(e).filter(Y),L=` ${l}.forEach(${D} => { ${u}({${b}${b.length?",":""}${k.join(",")}}); }); ${o}(${l}); `;return W([...b,l,u,o],L)(...b.map(A=>e[A]),m,n,a)}function _(t,e,n,a=!0){if(a&&t[rt])return;let l=t.outerHTML();t[R]=t[R]||[];let u=t.attributes();for(let r of[...u]){let f=r.name,d=At(f);d&&(t[R].push({...d,expr:r.value}),t.removeAttribute(f))}let o=!1;for(let r of t[R]){try{r.exec(t,{...r,data:e,evalExpr:st,error:n,code:l})}catch(f){n(f.message,{directive:r.name,argument:r.arg,expression:r.expr,toString(){return`${r.name}${r.arg?":"+r.arg:""}="${r.expr}"`}},l)}o=r.tmpl||o}if(!o)for(let r of t.childNodes())r.el[H]?_(bt(r.el),e,n):r.el?.nodeType===1&&_(r,e,n)}function Lt(t={},e=Nt){_(this,t,e),this.dispatchEvent(new Event("render"))}function Ct(){return this.outerHTML().replaceAll("<!-- ref -->","")}function _t(t){t.install(tt),t.extendInstance({render:Lt,source:Ct}),t.extendSetup({extendTemplate:{defineDirective:T,getDirective(e){return F[e]}}})}var vt=_t;export{vt as default};