/* graphane - 1.0.0-beta.6 */ var We="function",Qt="undefined",$="object",C="string",W="array",R="number",U="boolean",Ye="date",Xe="symbol",D="",st=",";var Je=";",m=t=>typeof t===$,N=t=>typeof t===C,l=t=>typeof t===We,jt=t=>typeof t===R&&!isNaN(t),it=t=>!Number.isNaN(t),y=t=>typeof t===Qt,te=t=>typeof t===Xe,ee=t=>typeof t===U,_=t=>Array.isArray(t),St=t=>t instanceof Date&&!isNaN(t),T=t=>t===null,ot=t=>t.replace(/-([a-z0-9])/g,(e,n)=>n.toUpperCase());function Ke(t){if(N(t))try{let e=t.replace(/^\s*{/,"").replace(/}\s*$/,"").split(/((?:[^;^,"']|"[^"]*"|'[^']*')+)/).filter(n=>!["",";",","].includes(n.trim())).map(n=>n.split(":")).map(n=>`"${n[0].trim()}":${L(n[1].trim(),void 0,!0)}`).join(",");return JSON.parse(`{${e}}`)}catch{try{return L(t)}catch(n){console.error(n);return}}else if(m(t))return t}function ne(t){if(N(t))return t.trim().startsWith("[")?(t.match(/\[(.*?)[^\]]]/g)||[]).map(e=>ne(e.substring(1,e.length-1))):t.split(/[,;]/).map(e=>L(e.trim()));if(_(t))return t}function L(t,e,n=!1){if(!N(t))return t;if(t=Ze(t.trim()),e===W)return ne(t);if(e===$)return Ke(t);if(y(e)||e===R){if(y(t)||t==="")return;let r=+t;if(it(r)||e===R)return r}if(y(e)||e===U){if(t==="true")return!0;if(t==="false")return!1;if(e===U)return t==="0"?!1:!!t}if(e===Ye){try{let r=new Date(t);if(it(r.getTime()))return r}catch{}return}if(y(e)||e===C)return n?`"${t}"`:t}function Ze(t){return t[0]==="'"&&t[t.length-1]==="'"||t[0]==='"'&&t[t.length-1]==='"'?t.substring(1,t.length-1):t}function re(t){return/^\s*{/.test(t)&&/}\s*$/.test(t)}function ie(t){return/^\s*\[/.test(t)&&/]\s*$/.test(t)}function se(t){let e=[],n=t.split(/(\r\n|\r|\n)/).map(r=>r.trim()).filter(r=>r);return n.length===0?[]:n.length===1?L(n[0]):n.reduce((r,i,c)=>{let o={},s=i.split(/((?:[^;^,"']|"[^"]*"|'[^']*')+)/).filter(u=>![D,Je,st].includes(u.trim()));return c===0?(e=[...s.map(u=>L(u))],r):(s.forEach((u,f)=>{o[e[f]]=L(u)}),r.push(o),r)},[])}function At(t){let e=`return (${t});`,n=new Function(e)();return typeof n=="function"?n():n}var oe=new WeakSet,j=!1,Tt=(t,e)=>!m(t)||T(t)||!l(e)?t:function n(r){if(oe.has(r))return r;for(let c in r)m(r[c])&&!T(r[c])&&(r[c]=n(r[c]));let i=new Proxy(r,{get(c,o){let s=Reflect.get(r,o);return l(s)&&St(c)&&N(o)&&o.substring(0,3)==="set"&&l(e)&&(s=function(...u){let f=Reflect.get(c,o).apply(c,u);return!j&&e(t),f}),St(c)?s.bind(c):s},set(c,o,s){let u,f=c[o]===s;return m(s)&&!T(s)?u=Reflect.set(c,o,n(s)):u=Reflect.set(c,o,s),!j&&!f&&e(t),u},deleteProperty(c,o){let s=Reflect.deleteProperty(c,o);return!j&&e(t),s}});return oe.add(i),i}(t);Tt.stop=()=>j=!0;Tt.start=()=>j=!1;var ct=Tt;var tt=!1,ut=!0;function Qe(t){return t===null?null:t.constructor?new t.constructor:{}}function F(t){if(!m(t))return t;let e=t===null?null:Object.assign(Qe(t),t);for(let n in e)m(e[n])&&(e[n]=F(e[n]));return e}function ce(t,e){let n=[],r=[];function i(o,s){if(o===null||s===null)return tt;if(l(o.valueOf)&&l(s.valueOf)&&(o!==o.valueOf()||s!==s.valueOf()))return o.valueOf()===s.valueOf()&&o.constructor===s.constructor;if(n.indexOf(o)>-1&&r.indexOf(s)>-1)return ut;let u=Object.keys(o),f=Object.keys(s);if(u.length!==f.length)return tt;if(u.length>0){n.push(o),r.push(s);let d=u.length;for(;d--;){let x=u[d];if(!c(o[x],s[x]))return tt}}return ut}function c(o,s){if(o===s)return ut;let u=typeof o;return u!==typeof s?tt:u===R&&isNaN(o)&&isNaN(s)?ut:u===$?i(o,s):tt}return c(t,e)}function ue(t,e){let n=t,r=N(e)?e.split("."):e;for(let i=0;i<r.length;i++){if(y(n[r[i]]))return;n=n[r[i]]}return n}var bt=globalThis.GRAPHANE_PREFIX||"g-",je=Symbol(),g=Symbol(),V=Symbol(),A=Symbol(),wt=Object.defineProperty;function tn(t,e,n,r=!1){if(!(t.ready===!1||!e))if(r)n?t.setAttribute(e,D):t.removeAttribute(e);else{let i=T(n)||y(n)?D:n.toString();t.hasAttribute(e)&&t.getAttribute(e)!==i&&t.setAttribute(e,i)}}function en(t){this[g]={};let e=t;do{let n=at.get(e);for(let r in n)if(n.hasOwnProperty(r)&&this.hasOwnProperty(r)){let i=this[r];delete this[r],this[r]=y(i)?F(n[r]):i}else r in this[g]||(this[g][r]=F(n[r]));e=Object.getPrototypeOf(e)}while(e!==HTMLElement)}function nn(){new MutationObserver(t=>{t.some(e=>!e.attributeName)&&this[A]("update"),(y(this.ready)||this.ready)&&l(this[V])&&this[V](t)}).observe(this,{attributes:!0,childList:!0,subtree:!0,characterData:!0})}var at=new WeakMap,ft=class extends HTMLElement{constructor(){super(),en.call(this,new.target),new.target[je]?.forEach(e=>l(e)&&e.call(this,this)),l(this[V])&&nn.call(this)}[A](e,n={},r=!1){return this.dispatchEvent(new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n,composed:r}))}};function rn(t,e){e.propertyName||(e.propertyName=ot(e.name)),ae(t,{...e,name:e.propertyName,attribute:e.name});let n=Object.getPrototypeOf(t),r="observedAttributes",i=Object.getOwnPropertyDescriptor(t,r),c=Object.getOwnPropertyDescriptor(n,r),o=i?i.get:void 0;wt(t,r,on(t,e,n,o,i,c));let s="attributeChangedCallback",u=Object.getOwnPropertyDescriptor(t.prototype,s),f=Object.getOwnPropertyDescriptor(n.prototype,s),d=u?u.value:void 0;wt(t.prototype,s,sn(e,d,f))}function sn(t,e,n){return{value:function(r,i,c){if(t.name===r){let o=t.propertyName;this[o]!==c&&(t.type===U?this[o]=this.hasAttribute(t.name):this[o]=L(c,t.type))}else e&&e.apply(this,arguments);n?.value&&n.value.apply(this,arguments)},enumerable:!1,writable:!0,configurable:!0}}function on(t,e,n,r,i,c){let o={enumerable:!1,configurable:!0};return i?c?o.get=function(){return[e.name,...r.call(t),...c.get.call(n)]}:o.get=function(){return[e.name,...r.call(t)]}:o.get=c?function(){return[e.name,...c.get.call(n)]}:function(){return[e.name]},o}function ae(t,e){wt(t.prototype,e.name,{set:fe(e),get:un(e),configurable:!0,enumerable:!1}),at.has(t)||at.set(t,{}),at.get(t)[e.name]=e.value}function cn(t,e){T(t.posUpdateEvent)||(t.posUpdateEvent?this[A](t.posUpdateEvent,{[t.name]:e}):this[A]("update",{[t.name]:e})),l(t.posUpdate)?t.posUpdate.call(this,e):l(this[t.posUpdate])&&this[t.posUpdate]()}function fe(t){return function(e){let n=this[g];l(t.preUpdate)&&!t.preUpdate.call(this,e)||(t.schema&&(ct.stop(),e=t.schema.normalize(e),ct.start()),!(!m(e)&&ce(n[t.name],e))&&(l(t.set)?t.set.call(this,e):n[t.name]=N(e)&&t.type?L(e,t.type):e,t.attribute&&![W,$].includes(t.type)&&tn(this,t.attribute,e,t.type===U),cn.call(this,t,e)))}}function un(t){return function(){if(l(t.get))return t.get.call(this);{let e=this[g];switch(t.type){case R:return y(e[t.name])?void 0:Number(e[t.name]);case U:return!!e[t.name];case $:case W:return ct(e[t.name]||(t.type===$?{}:[]),n=>fe(t).call(this,n));default:return e[t.name]}}}}function an(t,e){e=bt+e.toLowerCase(),customElements.get(e)||customElements.define(e,t)}function le(t,e={}){return e.prop=(...n)=>(n.forEach(r=>ae(t,{...r})),e),e.attr=(...n)=>(n.forEach(r=>rn(t,{...r})),e),e.tag=n=>(an(t,n),e),e.extension=e.ext=n=>(n.call(e,e,t),e),e}function Rt(t,e){let n=new WeakMap;return function(...r){clearTimeout(n.get(this)),n.set(this,setTimeout(()=>{t.apply(this,r)},e))}}function Ot(t,e){let n=new WeakMap,r=[];return function(...i){return clearTimeout(n.get(this)),new Promise((c,o)=>{r.push({resolve:c,reject:o}),n.set(this,setTimeout(()=>{try{let s=t.apply(this,i);r.forEach(u=>u.resolve(s))}catch(s){r.forEach(u=>u.reject(s))}finally{r.length=0}},e))})}}function vt(t,e){return function(...n){if(t.apply(this,n))return e.apply(this,n)}}function Ct(t,e){return function(...n){let r=t.apply(this,n);return r instanceof Promise?r.then(i=>e.call(this,i)||i):e.call(this,r)||r}}var he=1,Y=Symbol(),w=Symbol(),de=Symbol(),Lt=Symbol();var k=class extends ft{constructor(e){super(),this.attachShadow({mode:"open"}),this[g].ready=e||!1,this[g].rendered=!1,y(e)&&(this.ready=!0)}get ready(){return this[g].ready}set ready(e){let n=this[g],r=n.ready;n.ready=!!e,r===!1&&n.ready===!0&&(this[A]("ready",{ready:!0}),l(this[w])&&this[w]())}get rendered(){return this[g].rendered}set rendered(e){let n=this[g],r=n.rendered;n.rendered=!!e,r===!1&&n.rendered===!0&&this[A]("render",{rendered:!0})}connectedCallback(){let e=this.getBoundingClientRect(),n=getComputedStyle(this).flexDirection,r=()=>{let{width:i,height:c}=this.getBoundingClientRect(),o=getComputedStyle(this).flexDirection;(i!==e.width||c!==e.height||o!==n)&&(l(this[de])&&this[de](i,c,i-e.width,c-e.height),e={width:i,height:c},n=o,this[A]("resize",e)),this[g]._resizeObserver=window.requestAnimationFrame(r)};r()}disconnectedCallback(){window.cancelAnimationFrame(this[g]._resizeObserver)}};function fn(t,e){let n={name:e.name.startsWith("--")?e.name:`--${bt}${e.name}`,initialValue:e.initialValue??e.value??"",syntax:e.syntax??"*",inherits:e.inherits??!0};t.prototype[Lt]||(t.prototype[Lt]={}),t.prototype[Lt][n.name]=n}function ln(t){if(l(t.prototype[w])){let e=t.prototype[w];t.prototype[w]=vt(function(){return this.rendered=!1,this.ready},Ot(Ct(async function(){return e.apply(this)},function(n){this.rendered=n!==!1,this.rendered&&l(this[Y])&&this[Y]()}),he))}if(l(t.prototype[Y])){let e=t.prototype[Y];t.prototype[Y]=vt(function(n){return n&&(this[g].rendered=!0),this.ready&&this[g].rendered},Ot(Ct(async function(...n){return e.apply(this,n)},function(){this[A]("refresh")}),he))}}function pe(t){ln(t);let e=le(t,{style:(...n)=>(n.forEach(r=>fn(t,{...r})),e)});return e}k.RENDER=w;k.REFRESH=Y;k.CHANGE=V;var hn="intersection.enter",dn="intersection.exit",lt=Symbol();function pn(t){let e=r=>this.dispatchEvent(new CustomEvent(r,{bubbles:!0,cancelable:!0,composed:!0})),n=!1;this[lt]&&this[lt].disconnect(),this[lt]=new IntersectionObserver(r=>{r.forEach(i=>{i.isIntersecting&&i.intersectionRatio>=t?n||(n=!0,e(hn)):(n=!1,e(dn))})},{root:null,rootMargin:"0px",threshold:Array(21).fill(0).map((r,i)=>i*.05)}),this[lt].observe(this._el||this)}var _t=pn;var me=Symbol();function mn(t){t.attr({name:"intersection-once-class",type:C,value:""}).attr({name:"intersection-class",type:C,value:""}).attr({name:"intersection-ratio",type:R,value:0,posUpdate:gn})}var ye=(t,e)=>e&&e.split(/\s+/).forEach(n=>t.add(n)),yn=(t,e)=>e&&e.split(/\s+/).forEach(n=>t.remove(n)),ge=(t,e)=>{e.preventDefault();let n=()=>{t.removeEventListener("render",n),t[A](e.type,e.detail,e.composed)};t.addEventListener("render",n)};function gn(){let t=this[g];if(this[me])return _t.call(this,t.intersectionRatio);this[me]=!0;let e=this.classList;this.addEventListener("intersection.enter",n=>{ye(e,t.intersectionOnceClass),ye(e,t.intersectionClass),this.rendered||ge(this,n)}),this.addEventListener("intersection.exit",n=>{yn(e,t.intersectionClass),this.rendered||ge(this,n)}),_t.call(this,t.intersectionRatio)}var Ee=mn;var Ft="gSVGObject",En="http://www.w3.org/2000/svg",xn="svg",Mt="d",xe="transform",$e="appendChild",Ut="insertBefore",Ne="insertAdjacentElement",Se="attach",Ae="innerHTML",Pt=new WeakMap,It=new Set,Nn=t=>te(t)||t.startsWith("_")||["el","gSVG","then"].includes(t),ht=(t,e)=>t instanceof e,$n=()=>Ft+Math.random().toString(32).substring(2),Vt=t=>m(t)&&!T(t)&&t[Symbol.toStringTag]===Ft,Sn=t=>gt(document.createElementNS(En,t)),dt=t=>N(t)?Sn(t):m(t)&&t!==null?Vt(t)?t:gt(t):t,An=t=>({content:Ae,source:"outerHTML",parent:"parentElement",next:"nextElementSibling",previous:"previousElementSibling",add:$e,addBefore:Ut})[t]||t,Tn=t=>["append","before","after",$e,Ut,Ne].includes(t)?function(...e){let n=[],r=[],i=[];return t===Ne?(n.push(e[0]),r.push(dt(e[1]))):t===Ut?(r.push(dt(e[0])),i.push(e[1]||this.firstChild||null)):r.push(...e.map(dt)),r.every(c=>c?._el)?(this[t](...n,...r.map(c=>c._el),...i),r.forEach(c=>c._el.dispatchEvent(new Event(Se))),r.length>1?r:r[0]):null}:null,yt=class{constructor(e){this._el=e,this.gSVG=B}get[Symbol.toStringTag](){return Ft}get el(){return this._el}attachTo(e){return(m(e)?Vt(e)?e._el:e:document.querySelector(e)).appendChild(this._el),this._el.dispatchEvent(new Event(Se)),this}id(e){return e?(this._el.setAttribute("id",e),this):this._el.id||(this._el.id=$n())}ref(){return`#${this.id()}`}url(){return`url(${this.ref()})`}parents(){let e=[],n=this;for(;n=n.parentElement();)e.push(n);return e}top(){return this.parents().pop()||this}},gt=t=>{if(!m(t)||T(t))return null;if(Pt.has(t))return Pt.get(t);let e=new Proxy(new yt(t),{get(n,r){if(Nn(r))return n[r];if(!y(n[r]))return(...o)=>(M(e,r,o),n[r].call(e,...o));if([Mt,xe,"$"+Mt,"$"+xe].includes(r)){let o="";r[0]==="$"&&(r=r.substring(1));let u=r===Mt?wn:bn,f=new Proxy(d=>(M(e,r,[d]),y(d)?t.getAttribute(r):(d?t.setAttribute(r,d):t.removeAttribute(r),e)),{get(d,x){return x in d?Reflect.get(d,x):(...O)=>{if(x===Symbol.toPrimitive){let Z=o;return o="",Z}return o+=u(e,x,O),t?.setAttribute(r,o),f}}});return f}let i=An(r),c=Tn(i)||t[i];return l(c)?(...o)=>{M(e,r,o);let s=c.call(t,...o);return y(s)?e:we(s)}:Te(t,i,e)}});return Pt.set(t,e),e},Te=(t,e,n,r)=>{let i=e.replace(/_/g,"-"),c=(...o)=>{if(M(n,r?`${r}.${e}`:e,o),o.length===0){let u=t?.hasAttribute&&t.hasAttribute(i)?t.getAttribute(i):t[i];return we(u)}let s=o[0];if(ht(t,CSSStyleDeclaration))return t[i]=s,n;if(i in t&&!It.has(i)){let u=t[i];if(String(u)===String(s))return n;try{t[i]=s}catch{It.add(i)}if(m(t[i])&&t[i]===s||t[i]!==u||i===Ae)return n;It.add(i)}return s!==0&&!s?t?.removeAttribute&&t.removeAttribute(i):t?.setAttribute&&t.setAttribute(i,ee(s)?"":String(o)),n};return new Proxy(c,{get(o,s){let u=t[i][s];return l(u)?(...f)=>(M(n,`${e}.${s}`,f),u.call(t[i],...f)||n):Te(t[i],s,n,i)},set(o,s,u){return t[i][s]=u,!0}})},we=t=>ht(t,HTMLCollection)||ht(t,NodeList)?[...t].map(e=>gt(e)):ht(t,SVGElement)?gt(t):N(t)?t===""||isNaN(t)?t:Number(t):t,be=[],M=(t,e,n,r=[])=>{for(let i of be)i(B,t,e,n,r)},pt={},wn=(t,e,n)=>(M(t,`d.${e}`,n,Object.keys(pt).map(r=>`d.${r}`)),pt[e]?pt[e].apply(t,n):`${e}${n.join(st)}`),bn=(t,e,n)=>(M(t,`transform.${e}`,n),`${e}(${n.join(st)})`);function B(t){return M(null,D,[t]),dt(y(t)?xn:t)}B.isWrapped=Vt;var mt=t=>e=>l(e)?e(t):Object.assign(t,e),Dt={install:Re,extendConstructor:mt(B),extendInstance:mt(yt.prototype),extendPath:mt(pt),beforeEveryCall(t){l(t)&&be.push(t)}};Dt.extendSetup=mt(Dt);function Re(t){return t(Dt),B}B.install=Re;var et=B;var kt=new Map,Rn=/function\s+([\p{L}\p{Nl}$_][\p{L}\p{Nl}$_\p{Mn}\p{Mc}\p{Nd}\p{Pc}]*)\s*\(/gmu,On=async function(){}.constructor;function Et(t,e,n=!1){let r=`${t.join(",")} ${e}`;if(kt.has(r))return kt.get(r);let i=new(n?On:Function)(...t,e);return kt.set(r,i),i}function Oe(t,e){let n=[...e.matchAll(Rn)].map(i=>i[1]);return Et(Object.keys(t),`${e}; return {${n.map(i=>`${i}: typeof ${i} === 'function' ? ${i} : undefined`)}}; `)(...Object.values(t))}function Bt(t){try{return new Function(`let ${t} = 0`),!0}catch{return!1}}var Ht="animate",vn="path",ve="d",Ce="transform",Me="rotate",H="translate",Le="inherit",_e="finished",Cn=[Me,"skewX","skewY"],Ln=[H,"width","height","x","y","cx","cy","r","rx","ry","dx","dy"],_n=(t,e)=>["text","tspan"].includes(t)&&["x","y"].includes(e),Gt=!1;if(window.matchMedia){let t=window.matchMedia("(prefers-reduced-motion: reduce)");Gt=t.matches,t.addEventListener("change",()=>{Gt=t.matches})}var Mn=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase();function Pn(t,e={duration:200},n=null,r=null){let i=this.gSVG,c=a=>{let h=m(a)?{...a}:{duration:a};return Gt&&(h.duration=0),h.fill="none",h},o=a=>{a=_(a)?a:[a];let h=window.getComputedStyle(this._el),p=[],E=new Set;for(let v of a){let S={};for(let I in v){let b=ot(I);S[b]=x(v[I],b),!(b in h)||_n(this.tagName(),b)?E.add(b):b===ve?S.d=`${vn}("${S.d}")`:b===Ce&&(S.transform=f(S.transform))}p.push(S)}return u(E,p),p},s=[],u=(a,h)=>{if(a.size){let p=new KeyframeEffect(null,h).getKeyframes();for(let E of a){let v=i(Ht).attributeName(E).dur(Q.duration+"ms").fill("freeze");if(h.length===1)v.to(h[0][E]);else{let S=[],I=[];for(let b in p){let qe=p[b];E in h[b]&&(S.push(qe.computedOffset),I.push(h[b][E]))}S[0]!==0&&(S.unshift(0),I.unshift(this[E]()||Le)),S[S.length-1]!==1&&(S.push(1),I.push(this[E]()||Le)),v.keyTimes(S.join(";")).values(I.join(";"))}s.push(v),v.attachTo(this),v.beginElementAt(Q.delay||0)}}},f=a=>{N(a)&&(a=JSON.parse("{"+a.replace(/\s*\(\s*/g,":[").replace(/\s*\)\s*/g,"],").split(/\s*,\s*|\s.*/).join(",").replace(/(\w+):/g,'"$1":').replace(/,$/,"")+"}"));let h="";for(let p in a)if(p===Me){let E=d(a[p]);E.length>1&&(h+=`${H}(${x(E[1],H)},${x(E[2],H)}) `),h+=`${p}(${x(E[0],p)}) `,E.length>1&&(h+=`${H}(-${x(E[1],H)},-${x(E[2],H)}) `)}else h+=`${p}(${d(a[p]).map(E=>x(E,p)).join(",")}) `;return h},d=a=>_(a)?a:String(a).split(/\s+|,/),x=(a,h)=>Cn.includes(h)?a+"deg":Ln.includes(h)?a+"px":a,O=a=>N(a)?a.replace(/(deg)|(px)/g,"").trim():a,Z=a=>a.replace(/(path\s*\(\s*["'])|(["']\s*\)\s*$)/g,"").trim().replace(/([a-zA-Z])\s*/g,"$1").replace(/\s+/g,","),z=a=>{let h=/translate\((.*)px,(.*)px\) rotate\((.*)deg\) translate\((.*)px,(.*)px\)\s+/,p=h.exec(a);return p&&Number(p[1])===Number(p[4])*-1&&Number(p[2])===Number(p[5])*-1?a=a.replace(h,`rotate(${p[3]}, ${p[1]}, ${p[2]})`):a=O(a),a},Q=c(e),rt=o(t),q=this._el.animate(rt,Q);return q.ready.then(()=>l(n)&&n.call(this,q)),q.finished.then(()=>{let a=rt[rt.length-1];for(let h in a){let p=Mn(h);p.startsWith("text-")?this._el.style[h]=a[h]:h!=="offset"&&h in a&&this._el.setAttribute(p,p===ve?Z(a[h]):p===Ce?z(a[h]):O(a[h]))}s.forEach(h=>{h[_e](!0);let p=this._el.querySelectorAll(Ht),E=this._el.querySelectorAll(`${Ht}[${_e}]`);p.length===E.length&&p.forEach(v=>v.remove())}),l(r)&&r.call(this,q)}),this}function In(t){t.extendInstance({animateTo:Pn})}var Pe=In;var Ie=Symbol(),De=Symbol(),G=Symbol(),X=Symbol(),xt=Symbol(),zt=Symbol(),Ue=Symbol(),Un="unknown",Nt={},Fe=(t,e)=>new Error(`The expression "${t}" return ${e} value`),Dn=(t,e,n)=>{throw new Error(t+` in ${e} `+n)},Fn=(t=>e=>t[e]||e)("attributeName attributeType baseFrequency calcMode clipPathUnits diffuseConstant edgeMode gradientTransform gradientUnits kernelMatrix kernelUnitLength lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox xChannelSelector yChannelSelector zoomAndPan".split(" ").reduce((t,e)=>(t[e.toLowerCase()]=e,t),{}));function Ve(t){if(!t?.el?.parentNode)return null;let e=document.createComment(" ref ");return t.parentNode().insertBefore(e,t.el),t.remove(),e[zt]=t,e}function Vn(t){let e=t[zt];return t.parentNode.insertBefore(e.el,t),t.remove(),e}J({name:"g-content",exec(t,{expr:e,data:n,evalExpr:r}){let i={...n,$$:{fromURL:async u=>{let f=await fetch(u);if(f.status===200)return f.text();console.warn(`Failed to load URL: ${u} (${f.status})`)},currentContent:t.content}},c=r(e,i),o=new CustomEvent("load",{bubbles:!0,detail:t}),s=u=>y(u)?"":u;m(c)&&c.then?c.then(u=>{t.content(s(u)),t.dispatchEvent(o)}):(t.content(s(c)),t.dispatchEvent(o))}});J({name:"g-if",exec(t,{expr:e,data:n,evalExpr:r}){if(!r(e,n))return Ve(t)}});J({name:"g-bind",alias:":",arg:!0,exec(t,{expr:e,arg:n,data:r,evalExpr:i}){n=Fn(n);let c={...r,$$:["d","transform"].includes(n)?t["$"+n]:{}};c.$$.currentValue=t[n],c.$$.dynamic=(s,u=200,f=0)=>(t.animateTo((_(s)?s:[s]).map(d=>m(d)&&"offset"in d?{[n]:d.value,offset:d.offset}:{[n]:d}),{duration:u,delay:f}),Ue);let o=i(e,c);if(y(o))throw Fe(e,"undefined");if(n==="class"){if(_(o)){t.classList.add(...o.filter(s=>!!s));return}if(m(o)){Object.entries(o).forEach(([s,u])=>{u?t.classList.add(s):t.classList.remove(s)});return}o&&t.classList.add(o);return}if(n==="style"){Object.entries(o).forEach(([s,u])=>t.style[s](u));return}o!==Ue&&t[n](o)}});J({name:"g-on",alias:"@",arg:!0,exec(t,{expr:e,arg:n,data:r,evalExpr:i,error:c,code:o}){t[xt]=t[xt]||{};let s=t[xt][n]=t[xt][n]||new Map;s.has(e)&&t.removeEventListener(n,s.get(e));let u=function(f){try{let d=i(e,r,t);l(d)&&d.call(t,f)}catch(d){c(d.message,{directive:"g-on",argument:n,expression:e,toString(){return`g-on:${n}="${e}"`}},o)}};t.addEventListener(n,u),s.set(e,u),n==="init"&&!t[Ie]&&(t[Ie]=!0,t.dispatchEvent(new Event("init")))}});J({name:"g-for",tmpl:!0,exec(t,{expr:e,data:n,error:r}){t[G]=t[G]||[];let i=t.gSVG(Ve(t)),c=0;return Gn(e,n,o=>{if(t[G][c])nt(t[G][c],o,r,!1);else{let s=t.gSVG(t.tagName());s[X]=t[X].filter(u=>u.name!=="g-for"),[...t.attributes()].forEach(u=>{u.name!=="g-for"&&s.setAttribute(u.name,u.value)}),t.children().forEach(u=>{s.add(u.cloneNode(!0))}),i.before(s),nt(s,o,r),s[De]=!0,t[G].push(s)}c++},o=>{for(;t[G].length>o.length;)t[G].pop().remove()}),!0}});function J({name:t,alias:e,arg:n,tmpl:r,exec:i}){let c=`^(${t}${n?":":""}${e?`|${e})`:")"}${n?"(.*)$":"$"}`,o=new RegExp(c,"i");Nt[t]={name:t,alias:e,arg:n,tmpl:r,exec:i,check:o}}function kn(t){for(let e in Nt){let n=Nt[e],r=n.check.exec(t);if(r){let i=r[2];return{...n,arg:i}}}}function Bn(t){return t.replace(/[{}()[\]]/g,"").split(",").map(e=>(e.includes(":")?e.split(":")[1].trim():e).trim())}function Hn(t){return t[Symbol.iterator]?{iterator:[...t],type:W}:jt(t)?{iterator:Array(t<0?0:0|t).fill(0).map((e,n)=>n),type:R}:m(t)?{iterator:Object.entries(t).map(e=>e.reverse()),type:$}:{iterator:t,type:Un}}function ke(t,e,n=null){let r=Object.keys(e).filter(Bt),c=Et(r,`return ( ${t} ); `).apply(n,r.map(o=>e[o]));if(!it(c))throw Fe(t,"NaN (Not a Number)");return c}function Gn(t,e,n,r){let i="__$$i",c="__$$c",o="__$$f",[s,u]=t.split(" of ");s=s.trim(),u=u.trim();let f=ke(u,e)||[],{iterator:d,type:x}=Hn(f);x===$&&!s.startsWith("[")&&(s=`[${s.replace(/(^\()|(\)$)/g,"")}]`);let O=Bn(s),Z=s.startsWith("(")?s:`(${s})`,z=Object.keys(e).filter(Bt),Q=` ${i}.forEach(${Z} => { ${c}({${z}${z.length?",":""}${O.join(",")}}); }); ${o}(${i}); `;return Et([...z,i,c,o],Q)(...z.map(q=>e[q]),d,n,r)}function nt(t,e,n,r=!0){if(r&&t[De])return;let i=t.outerHTML();t[X]=t[X]||[];let c=t.attributes();for(let s of[...c]){let u=s.name,f=kn(u);f&&(t[X].push({...f,expr:s.value}),t.removeAttribute(u))}let o=!1;for(let s of t[X]){o=s.tmpl||o;try{if(s.exec(t,{...s,data:e,evalExpr:ke,error:n,code:i}))return}catch(u){n(u.message,{directive:s.name,argument:s.arg,expression:s.expr,toString(){return`${s.name}${s.arg?":"+s.arg:""}="${s.expr}"`}},i)}}if(!o)for(let s of t.childNodes())s.el[zt]?nt(Vn(s.el),e,n):s.el?.nodeType===1&&nt(s,e,n)}function zn(t={},e=Dn){nt(this,t,e),this.dispatchEvent(new Event("render"))}function qn(){return this.outerHTML().replaceAll("<!-- ref -->","")}function Wn(t){t.install(Pe),t.extendInstance({render:zn,source:qn}),t.extendSetup({extendTemplate:{defineDirective:J,getDirective(e){return Nt[e]}}})}var Be=Wn;var Wt=Symbol(),qt=Symbol(),He=(t,e,n)=>Object.defineProperty(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n}),Yn=(t,e)=>e===Wt?t:ue(t,e);function Yt(t={}){if(!m(t))return t;let e={};function n(r,i,c,o){r in t||(e[r]||(e[r]={}),He(t,r,(s=void 0,u=Wt)=>{if(N(s)||y(s)){if(u=s||Wt,u in e[r])return e[r][u];s=t}let f=s.reduce((d,x)=>{let O=Yn(x,u);return y(O)?d:d===qt?O:c(d,O)},l(i)?i():i);return f=l(o)?o(f):f,t!==s&&(e[r][u]=f),f===i?0:f}),He(t,r+"Before",(s,u)=>t[r](t.slice(0,s),u)))}return n("$min",qt,(r,i)=>i>r?r:i),n("$max",qt,(r,i)=>i<r?r:i),n("$count",0,r=>r+1),n("$sum",0,(r,i)=>i+r),n("$avg",()=>({n:0,i:0}),(r,i)=>(r.n++,r.i+=Number(i),r),r=>isNaN(r.i/r.n)?0:r.i/r.n),n("$distinct",new Set,(r,i)=>(r.add(i),r),r=>[...r]),t}var Xn=t=>{t.extendSetup({extendComposer(e){l(e)?e(P.prototype):Object.assign(P.prototype,e)}})};et.install(Be).install(Xn);var Jn="composer",Xt="update",K="svg",Jt="methods",Kt="config",Zt="data",$t="-src",Ge=t=>`script[type=${t}],g-script[type=${t}]`,ze=["0px","auto"],Kn=t=>{let e=getComputedStyle(t.el);return ze.includes(e.width)&&ze.includes(e.height)},P=class extends k{static install(e){et.install(e)}#t=null;#r=!1;#i=!1;#s=[];#e=[];#h=Rt(function(e,n){this[A](e,n)},1);#n(e,n,r,i){let c={message:e,scope:n,code:r,toString:()=>`${e}${n?` in ${n}`:""} ${r}`};i.push(c),console.warn(`Graphane Composer - Error: ${c}`),this.#h.call(this,"error",this.errors)}#d(e){return e.length=0,(n,r="",i="")=>this.#n(n,r,i,this.#s)}async#c(e){let n=await fetch(e);if(n.status!==200)throw new Error(`${n.statusText} (${n.status}): ${n.url}`);return n.text()}async#p(){let e=[...this.querySelectorAll(Ge("plugin"))];for(let n of e){let r=n.getAttribute("src");if(r){let i=new URL(r,document.location.href);try{let c=await import(i.href);c?.default&&et.install(c.default)}catch(c){this.#n(c.message,"plugin",r,this.#e)}}}}async#u(){let e=this[g];if(this.#t=null,e.content.innerHTML="",e.svgSrc)try{e.content.innerHTML=await this.#c(e.svgSrc)}catch(r){this.#n(r.message,K,e.svgSrc,this.#e)}else{let r=this.querySelector("template")?.content||this.querySelector(K);r&&e.content.append(r.cloneNode(!0))}let n=e.content.querySelector(K);return this.#t=n?et(n):null,!0}async#o(e,n){let r=this[g],i=e+"Src",c=this.querySelector(Ge(e));c&&(r[i]=c.getAttribute("src"));let o=r[i]?await this.#c(r[i]).catch(s=>this.#n(s.message,e,r[i],this.#e)):c?.textContent;if(o)try{r[e]=n(o)}catch(s){this.#n(s.message,e,o,this.#e)}}#a(){return this.#o(Jt,e=>Oe({$:this},e))}#f(){return this.#o(Kt,At)}#l(){return this.#o(Zt,e=>re(e)||ie(e)?At(e):se(e))}constructor(){super();let e=this[g];this.shadowRoot.innerHTML=` <style> :host { display : inline-block; width : max-content; height : max-content; } </style><span></span>`,e.content=this.shadowRoot.querySelector("span")}[w](){return!this.load()}async[V](e){let n=[];for(let r of e){let i=r.target;if(i===this&&!r.attributeName)return this.load();if(i.tagName.toLowerCase()===K)n.push(this.#u());else if(i.tagName==="SCRIPT"){let c={data:this.#l,methods:this.#a,config:this.#f}[i.type.toLowerCase()];c&&n.push(c())}}if(n.length)return await Promise.all(n),this.update()}async load(){return this.#r=!1,this.#e=[],await this.#p(),await Promise.all([this.#u(),this.#f(),this.#a(),this.#l()]),this.#r=!0,this[A]("load"),this.update(!0)}async update(e=!1){if(!(this.#i&&!e)&&this.#t){this.rendered=!1,this.#i=!0;let n=this[g],r=n.methods?.data?n.methods.data(Yt(F(n.data))):Yt(F(n.data)),i={...n.methods,..._(r)?{}:r,data:r,$:this};await this.#t.render(i,this.#d(this.#s)),Kn(this.#t)&&this.#t.width("100%").height("100%"),this.#i=!1,this.rendered=!0}}get[K](){return this.#t}get loaded(){return this.#r}get errors(){return[...this.#e,...this.#s]}get version(){return"1.0.0-beta.6"}};P.prototype.update=Rt(P.prototype.update,1);pe(P).ext(Ee).attr({name:K+$t,type:C,value:"",posUpdate:w}).attr({name:Zt,type:$,value:[],posUpdate:Xt}).attr({name:Zt+$t,type:C,posUpdate:w}).prop({name:Jt,type:$,value:{},posUpdate:Xt}).attr({name:Jt+$t,type:C,posUpdate:w}).attr({name:Kt,type:$,value:{},posUpdate:Xt}).attr({name:Kt+$t,type:C,posUpdate:w}).attr({name:"value",set(t){this.data={value:t}},get(){return this.data?.value}}).tag(Jn);export{P as default};