/* graphane - 0.1.0-alpha.8 */ (()=>{var ke="function",Jt="undefined",$="object",v="string",W="array",b="number",I="boolean",Ge="date",He="symbol",D="",nt=",";var Be=";",g=t=>typeof t===$,x=t=>typeof t===v,l=t=>typeof t===ke,Xt=t=>typeof t===b&&!isNaN(t),y=t=>typeof t===Jt,Kt=t=>typeof t===He,Zt=t=>typeof t===I,L=t=>Array.isArray(t),$t=t=>t instanceof Date&&!isNaN(t),O=t=>t===null,it=t=>t.replace(/-([a-z0-9])/g,(e,n)=>n.toUpperCase());function ze(t){if(x(t))try{let e=t.replace(/^\s*{/,"").replace(/}\s*$/,"").split(/((?:[^;^,"']|"[^"]*"|'[^']*')+)/).filter(n=>!["",";",","].includes(n.trim())).map(n=>n.split(":")).map(n=>`"${n[0].trim()}":${U(n[1].trim(),void 0,!0)}`).join(",");return JSON.parse(`{${e}}`)}catch(e){console.error(e);return}else if(g(t))return t}function Qt(t){if(x(t))return t.trim().startsWith("[")?(t.match(/\[(.*?)[^\]]]/g)||[]).map(e=>Qt(e.substring(1,e.length-1))):t.split(/[,;]/).map(e=>U(e.trim()));if(L(t))return t}function U(t,e,n=!1){if(!x(t))return t;if(t=qe(t.trim()),e===W)return Qt(t);if(e===$)return ze(t);if(y(e)||e===b){if(y(t)||t==="")return;let i=+t;if(!Number.isNaN(i)||e===b)return i}if(y(e)||e===I){if(t==="true")return!0;if(t==="false")return!1;if(e===I)return t==="0"?!1:!!t}if(e===Ge){try{let i=new Date(t);if(!Number.isNaN(i.getTime()))return i}catch{}return}if(y(e)||e===v)return n?`"${t}"`:t}function qe(t){return t[0]==="'"&&t[t.length-1]==="'"||t[0]==='"'&&t[t.length-1]==='"'?t.substring(1,t.length-1):t}function jt(t){return/^\s*{(.|\s)*}\s*$/.test(t)}function te(t){return/^\s*\[(.|\s)*]\s*$/.test(t)}function ee(t){let e=[];return t.split(/(\r\n|\r|\n)/).map(n=>n.trim()).filter(n=>n).reduce((n,i,r)=>{let c={},o=i.split(/((?:[^;^,"']|"[^"]*"|'[^']*')+)/).filter(s=>![D,Be,nt].includes(s.trim()));return r===0?(e=[...o.map(s=>U(s))],n):(o.forEach((s,u)=>{c[e[u]]=U(s)}),n.push(c),n)},[])}function St(t){let e=`return (${t});`,n=new Function(e)();return typeof n=="function"?n():n}var ne=new WeakSet,Q=!1,At=(t,e)=>l(e)?function n(i){if(ne.has(i))return i;for(let c in i)g(i[c])&&!O(i[c])&&(i[c]=n(i[c]));let r=new Proxy(i,{get(c,o){let s=Reflect.get(i,o);return l(s)&&$t(c)&&x(o)&&o.substring(0,3)==="set"&&l(e)&&(s=function(...u){let h=Reflect.get(c,o).apply(c,u);return!Q&&e(t),h}),$t(c)?s.bind(c):s},set(c,o,s){let u,h=c[o]===s;return g(s)&&!O(s)?u=Reflect.set(c,o,n(s)):u=Reflect.set(c,o,s),!Q&&!h&&e(t),u},deleteProperty(c,o){let s=Reflect.deleteProperty(c,o);return!Q&&e(t),s}});return ne.add(r),r}(t):t;At.stop=()=>Q=!0;At.start=()=>Q=!1;var rt=At;var j=!1,st=!0;function We(t){return t===null?null:t.constructor?new t.constructor:{}}function F(t){if(!g(t))return t;let e=t===null?null:Object.assign(We(t),t);for(let n in e)g(e[n])&&(e[n]=F(e[n]));return e}function ie(t,e){let n=[],i=[];function r(o,s){if(o===null||s===null)return j;if(l(o.valueOf)&&l(s.valueOf)&&(o!==o.valueOf()||s!==s.valueOf()))return o.valueOf()===s.valueOf()&&o.constructor===s.constructor;if(n.indexOf(o)>-1&&i.indexOf(s)>-1)return st;let u=Object.keys(o),h=Object.keys(s);if(u.length!==h.length)return j;if(u.length>0){n.push(o),i.push(s);let d=u.length;for(;d--;){let N=u[d];if(!c(o[N],s[N]))return j}}return st}function c(o,s){if(o===s)return st;let u=typeof o;return u!==typeof s?j:u===b&&isNaN(o)&&isNaN(s)?st:u===$?r(o,s):j}return c(t,e)}function re(t,e){let n=t,i=x(e)?e.split("."):e;for(let r=0;r<i.length;r++){if(y(n[i[r]]))return;n=n[i[r]]}return n}var ct=globalThis.GRAPHANE_PREFIX||"g-",Ye=Symbol(),m=Symbol(),V=Symbol(),A=Symbol(),Tt=Object.defineProperty;function Je(t,e,n,i=!1){if(!(t.ready===!1||!e))if(i)n?t.setAttribute(e,D):t.removeAttribute(e);else{let r=O(n)||y(n)?D:n.toString();t.hasAttribute(e)&&t.getAttribute(e)!==r&&t.setAttribute(e,r)}}function Xe(t){this[m]={};let e=t;do{let n=ot.get(e);for(let i in n)if(n.hasOwnProperty(i)&&this.hasOwnProperty(i)){let r=this[i];delete this[i],this[i]=y(r)?F(n[i]):r}else i in this[m]||(this[m][i]=F(n[i]));e=Object.getPrototypeOf(e)}while(e!==HTMLElement)}function Ke(){new MutationObserver(t=>{for(let e of t)if(!e.attributeName){this[A]("update");break}(y(this.ready)||this.ready)&&l(this[V])&&this[V](t)}).observe(this,{attributes:!0,childList:!0,subtree:!0,characterData:!0})}var ot=new WeakMap,ut=class extends HTMLElement{constructor(){super(),Xe.call(this,new.target),new.target[Ye]?.forEach(e=>l(e)&&e.call(this,this)),l(this[V])&&Ke.call(this)}[A](e,n={},i=!1){return this.dispatchEvent(new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n,composed:i}))}};function Ze(t,e){e.propertyName||(e.propertyName=it(e.name)),se(t,{name:e.propertyName,value:e.value,get:e.get,set:e.set,attribute:e.name,type:e.type,preUpdate:e.preUpdate,posUpdate:e.posUpdate,posUpdateEvent:e.posUpdateEvent,schema:e.schema});let n=Object.getPrototypeOf(t),i="observedAttributes",r=Object.getOwnPropertyDescriptor(t,i),c=Object.getOwnPropertyDescriptor(n,i),o=r?r.get:void 0;Tt(t,i,je(t,e,n,o,r,c));let s="attributeChangedCallback",u=Object.getOwnPropertyDescriptor(t.prototype,s),h=Object.getOwnPropertyDescriptor(n.prototype,s),d=u?u.value:void 0;Tt(t.prototype,s,Qe(e,d,h))}function Qe(t,e,n){return{value:function(i,r,c){if(t.name===i){let o=t.propertyName;this[o]!==c&&(t.type===I?this[o]=this.hasAttribute(t.name):this[o]=U(c,t.type))}else e&&e.apply(this,arguments);n?.value&&n.value.apply(this,arguments)},enumerable:!1,writable:!0,configurable:!0}}function je(t,e,n,i,r,c){let o={enumerable:!1,configurable:!0};return r?c?o.get=function(){return[e.name,...i.call(t),...c.get.call(n)]}:o.get=function(){return[e.name,...i.call(t)]}:o.get=c?function(){return[e.name,...c.get.call(n)]}:function(){return[e.name]},o}function se(t,e){Tt(t.prototype,e.name,{set:oe(e),get:en(e),configurable:!0,enumerable:!1}),ot.has(t)||ot.set(t,{}),ot.get(t)[e.name]=e.value}function tn(t,e){O(t.posUpdateEvent)||(t.posUpdateEvent?this[A](t.posUpdateEvent,{[t.name]:e}):this[A]("update",{[t.name]:e})),l(t.posUpdate)?t.posUpdate.call(this,e):l(this[t.posUpdate])&&this[t.posUpdate]()}function oe(t){return function(e){let n=this[m];l(t.preUpdate)&&!t.preUpdate.call(this,e)||(t.schema&&(rt.stop(),e=t.schema.normalize(e),rt.start()),!(!g(e)&&ie(n[t.name],e))&&(l(t.set)?t.set.call(this,e):n[t.name]=x(e)&&t.type?U(e,t.type):e,t.attribute&&![W,$].includes(t.type)&&Je(this,t.name,e,t.type===I),tn.call(this,t,e)))}}function en(t){return function(){if(l(t.get))return t.get.call(this);{let e=this[m];switch(t.type){case b:return y(e[t.name])?void 0:Number(e[t.name]);case I:return!!e[t.name];case $:case W:return rt(e[t.name]||(t.type===$?{}:[]),n=>oe(t).call(this,n));default:return e[t.name]}}}}function nn(t,e){customElements.get(ct+e.toLowerCase())||customElements.define(ct+e.toLowerCase(),t)}function ce(t,e={}){return e.property=(...n)=>(n.forEach(i=>se(t,{...i})),e),e.attribute=(...n)=>(n.forEach(i=>Ze(t,{...i})),e),e.tag=n=>(nn(t,n),e),e.extension=n=>(n.call(e,e,t),e),e}function ue(t,e){let n=new WeakMap;return function(...i){clearTimeout(n.get(this)),n.set(this,setTimeout(()=>{t.apply(this,i)},e))}}function wt(t,e){let n=new WeakMap,i=[];return function(...r){return clearTimeout(n.get(this)),new Promise((c,o)=>{i.push({resolve:c,reject:o}),n.set(this,setTimeout(()=>{try{let s=t.apply(this,r);i.forEach(u=>u.resolve(s))}catch(s){i.forEach(u=>u.reject(s))}finally{i.length=0}},e))})}}function bt(t,e){return function(...n){if(t.apply(this,n))return e.apply(this,n)}}function Ot(t,e){return function(...n){let i=t.apply(this,n);return i instanceof Promise?i.then(r=>e.call(this,r)||r):e.call(this,i)||i}}var ae=1,Y=Symbol(),T=Symbol(),fe=Symbol(),Rt=Symbol();var k=class extends ut{constructor(e){super(),this.attachShadow({mode:"open"}),this[m].ready=e||!1,this[m].rendered=!1,y(e)&&(this.ready=!0)}get ready(){return this[m].ready}set ready(e){let n=this[m],i=n.ready;n.ready=!!e,i===!1&&n.ready===!0&&(this[A]("ready",{ready:!0}),l(this[T])&&this[T]())}get rendered(){return this[m].rendered}set rendered(e){let n=this[m],i=n.rendered;n.rendered=!!e,i===!1&&n.rendered===!0&&this[A]("render",{rendered:!0})}connectedCallback(){let e=this.getBoundingClientRect(),n=getComputedStyle(this).flexDirection,i=()=>{let{width:r,height:c}=this.getBoundingClientRect(),o=getComputedStyle(this).flexDirection;(r!==e.width||c!==e.height||o!==n)&&(l(this[fe])&&this[fe](r,c,r-e.width,c-e.height),e={width:r,height:c},n=o,this[A]("resize",e)),this[m]._resizeObserver=window.requestAnimationFrame(i)};i()}disconnectedCallback(){window.cancelAnimationFrame(this[m]._resizeObserver)}};function rn(t,e){let n={name:e.name.startsWith("--")?e.name:`--${ct}${e.name}`,initialValue:e.initialValue??e.value??"",syntax:e.syntax??"*",inherits:e.inherits??!0};t.prototype[Rt]||(t.prototype[Rt]={}),t.prototype[Rt][n.name]=n}function sn(t){if(l(t.prototype[T])){let e=t.prototype[T];t.prototype[T]=bt(function(){return this.rendered=!1,this.ready},wt(Ot(async function(){return e.apply(this)},function(n){this.rendered=n!==!1,this.rendered&&l(this[Y])&&this[Y]()}),ae))}if(l(t.prototype[Y])){let e=t.prototype[Y];t.prototype[Y]=bt(function(n){return n&&(this[m].rendered=!0),this.ready&&this[m].rendered},wt(Ot(async function(...n){return e.apply(this,n)},function(){this[A]("refresh")}),ae))}}function le(t){sn(t);let e=ce(t,{style:(...n)=>(n.forEach(i=>rn(t,{...i})),e)});return e}k.RENDER=T;k.REFRESH=Y;k.CHANGE=V;var on="intersection.enter",cn="intersection.exit",at=Symbol(),un={root:null,rootMargin:"0px",threshold:Array(21).fill(0).map((t,e)=>e*.05)};function an(t){let e=!1;this[at]&&this[at].disconnect(),this[at]=new IntersectionObserver(n=>{n.forEach(i=>{i.isIntersecting&&i.intersectionRatio>=t?e||(e=!0,this.dispatchEvent(new CustomEvent(on,{bubbles:!0,cancelable:!0,composed:!0}))):(e=!1,this.dispatchEvent(new CustomEvent(cn,{bubbles:!0,cancelable:!0,composed:!0})))})},un),this[at].observe(this._el||this)}var _t=an;var he=Symbol();function fn(t){t.attribute({name:"intersection-once-class",type:v,value:""}).attribute({name:"intersection-class",type:v,value:""}).attribute({name:"intersection-ratio",type:b,value:0,posUpdate:hn})}var de=(t,e)=>e&&e.split(/\s+/).forEach(n=>t.add(n)),ln=(t,e)=>e&&e.split(/\s+/).forEach(n=>t.remove(n)),pe=(t,e)=>{e.preventDefault();let n=()=>{t.removeEventListener("render",n),t[A](e.type,e.detail,e.composed)};t.addEventListener("render",n)};function hn(){let t=this[m];if(this[he])return _t.call(this,t.intersectionRatio);this[he]=!0;let e=this.classList;this.addEventListener("intersection.enter",n=>{de(e,t.intersectionOnceClass),de(e,t.intersectionClass),this.rendered||pe(this,n)}),this.addEventListener("intersection.exit",n=>{ln(e,t.intersectionClass),this.rendered||pe(this,n)}),_t.call(this,t.intersectionRatio)}var me=fn;var It="gSVGObject",dn="http://www.w3.org/2000/svg",pn="svg",vt="d",ye="transform",ge="appendChild",Ct="insertBefore",Ee="insertAdjacentElement",Ne="attach",xe="innerHTML",Lt=new WeakMap,Mt=new Set,mn=t=>Kt(t)||t.startsWith("_")||["el","gSVG","then"].includes(t),ft=(t,e)=>t instanceof e,yn=()=>It+Math.random().toString(32).substring(2),Ut=t=>g(t)&&!O(t)&&t[Symbol.toStringTag]===It,En=t=>mt(document.createElementNS(dn,t)),lt=t=>x(t)?En(t):g(t)&&t!==null?Ut(t)?t:mt(t):t,gn=t=>({content:xe,source:"outerHTML",parent:"parentElement",next:"nextElementSibling",previous:"previousElementSibling",add:ge,addBefore:Ct})[t]||t,Nn=t=>["append","before","after",ge,Ct,Ee].includes(t)?function(...e){let n=[],i=[],r=[];return t===Ee?(n.push(e[0]),i.push(lt(e[1]))):t===Ct?(i.push(lt(e[0])),r.push(e[1]||this.firstChild||null)):i.push(...e.map(lt)),i.every(c=>c?._el)?(this[t](...n,...i.map(c=>c&&c._el),...r),i.forEach(c=>c._el.dispatchEvent(new Event(Ne))),i.length>1?i:i[0]):i[0]}:null,pt=class{constructor(e){this._el=e,this.gSVG=G}get[Symbol.toStringTag](){return It}get el(){return this._el}attachTo(e){return(g(e)?Ut(e)?e._el:e:document.querySelector(e)).appendChild(this._el),this._el.dispatchEvent(new Event(Ne)),this}id(e){return e?(this._el.setAttribute("id",e),this):this._el.id||(this._el.id=yn())}ref(){return`#${this.id()}`}url(){return`url(${this.ref()})`}parents(){let e=[],n=this;for(;n=n.parentElement();)e.push(n);return e}top(){return this.parents().pop()||this}},mt=t=>{if(!g(t)||O(t))return null;if(Lt.has(t))return Lt.get(t);let e=new Proxy(new pt(t),{get(n,i){if(mn(i))return n[i];if(!y(n[i]))return(...o)=>(M(e,i,o),n[i].call(e,...o));if([vt,ye,"$"+vt,"$"+ye].includes(i)){let o="";i[0]==="$"&&(i=i.substring(1));let u=i===vt?xn:$n,h=new Proxy(d=>(M(e,i,[d]),y(d)?t.getAttribute(i):(d?t.setAttribute(i,d):t.removeAttribute(i),e)),{get(d,N){return N in d?Reflect.get(d,N):(...R)=>{if(N===Symbol.toPrimitive){let K=o;return o="",K}return o+=u(e,N,R),t?.setAttribute(i,o),h}}});return h}let r=gn(i),c=Nn(r)||t[r];return l(c)?(...o)=>{M(e,i,o);let s=c.call(t,...o);return y(s)?e:Se(s)}:$e(t,r,e)}});return Lt.set(t,e),e},$e=(t,e,n,i)=>{let r=e.replace(/_/g,"-"),c=(...o)=>{if(M(n,i?`${i}.${e}`:e,o),o.length===0){let u=t?.hasAttribute&&t.hasAttribute(r)?t.getAttribute(r):t[r];return Se(u)}let s=o[0];if(ft(t,CSSStyleDeclaration))return t[r]=s,n;if(r in t&&!Mt.has(r)){let u=t[r];if(String(u)===String(s))return n;try{t[r]=s}catch{Mt.add(r)}if(g(t[r])&&t[r]===s||t[r]!==u||r===xe)return n;Mt.add(r)}return s!==0&&!s?t?.removeAttribute&&t.removeAttribute(r):t?.setAttribute&&t.setAttribute(r,Zt(s)?"":String(o)),n};return new Proxy(c,{get(o,s){let u=t[r][s];return l(u)?(...h)=>(M(n,`${e}.${s}`,h),u.call(t[r],...h)||n):$e(t[r],s,n,r)},set(o,s,u){return t[r][s]=u,!0}})},Se=t=>ft(t,HTMLCollection)||ft(t,NodeList)?[...t].map(e=>mt(e)):ft(t,SVGElement)?mt(t):x(t)?t===""||Number.isNaN(Number(t))?t:Number(t):t,Ae=[],M=(t,e,n,i=[])=>{for(let r of Ae)r(G,t,e,n,i)},ht={},xn=(t,e,n)=>(M(t,`d.${e}`,n,Object.keys(ht).map(i=>`d.${i}`)),ht[e]?ht[e].apply(t,n):`${e}${n.join(nt)}`),$n=(t,e,n)=>(M(t,`transform.${e}`,n),`${e}(${n.join(nt)})`);function G(t){return M(null,D,[t]),lt(y(t)?pn:t)}G.isWrapped=Ut;var dt=t=>e=>l(e)?e(t):Object.assign(t,e),Pt={install:Te,extendConstructor:dt(G),extendInstance:dt(pt.prototype),extendPath:dt(ht),beforeEveryCall(t){l(t)&&Ae.push(t)}};Pt.extendSetup=dt(Pt);function Te(t){return t(Pt),G}G.install=Te;var tt=G;var Dt=new Map,Sn=/function\s+([\p{L}\p{Nl}$_][\p{L}\p{Nl}$_\p{Mn}\p{Mc}\p{Nd}\p{Pc}]*)\s*\(/gmu,An=async function(){}.constructor;function yt(t,e,n=!1){let i=`${t.join(",")} ${e}`;if(Dt.has(i))return Dt.get(i);let r=new(n?An:Function)(...t,e);return Dt.set(i,r),r}function we(t,e){let n=[...e.matchAll(Sn)].map(r=>r[1]);return yt(Object.keys(t),`${e}; return {${n.map(r=>`${r}: typeof ${r} === 'function' ? ${r} : undefined`)}}; `)(...Object.values(t))}function Ft(t){try{return new Function(`let ${t} = 0`),!0}catch{return!1}}var Vt="animate",Tn="path",be="d",Oe="transform",ve="rotate",H="translate",Re="inherit",_e="finished",wn=[ve,"skewX","skewY"],bn=[H,"width","height","x","y","cx","cy","r","rx","ry","dx","dy"],On=(t,e)=>["text","tspan"].includes(t)&&["x","y"].includes(e),kt=!1;if(window.matchMedia){let t=window.matchMedia("(prefers-reduced-motion: reduce)");kt=t.matches,t.addEventListener("change",()=>{kt=t.matches})}var Rn=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase();function _n(t,e={duration:200},n=null,i=null){let r=this.gSVG,c=a=>{let f=g(a)?{...a}:{duration:a};return kt&&(f.duration=0),f.fill="none",f},o=a=>{a=L(a)?a:[a];let f=window.getComputedStyle(this._el),p=[],E=new Set;for(let _ of a){let S={};for(let P in _){let w=it(P);S[w]=N(_[P],w),!(w in f)||On(this.tagName(),w)?E.add(w):w===be?S.d=`${Tn}("${S.d}")`:w===Oe&&(S.transform=h(S.transform))}p.push(S)}return u(E,p),p},s=[],u=(a,f)=>{if(a.size){let p=new KeyframeEffect(null,f).getKeyframes();for(let E of a){let _=r(Vt).attributeName(E).dur(Z.duration+"ms").fill("freeze");if(f.length===1)_.to(f[0][E]);else{let S=[],P=[];for(let w in p){let Ve=p[w];E in f[w]&&(S.push(Ve.computedOffset),P.push(f[w][E]))}S[0]!==0&&(S.unshift(0),P.unshift(this[E]()||Re)),S[S.length-1]!==1&&(S.push(1),P.push(this[E]()||Re)),_.keyTimes(S.join(";")).values(P.join(";"))}s.push(_),_.attachTo(this),_.beginElementAt(Z.delay||0)}}},h=a=>{x(a)&&(a=JSON.parse("{"+a.replace(/\s*\(\s*/g,":[").replace(/\s*\)\s*/g,"],").split(/\s*,\s*|\s.*/).join(",").replace(/(\w+):/g,'"$1":').replace(/,$/,"")+"}"));let f="";for(let p in a)if(p===ve){let E=d(a[p]);E.length>1&&(f+=`${H}(${N(E[1],H)},${N(E[2],H)}) `),f+=`${p}(${N(E[0],p)}) `,E.length>1&&(f+=`${H}(-${N(E[1],H)},-${N(E[2],H)}) `)}else f+=`${p}(${d(a[p]).map(E=>N(E,p)).join(",")}) `;return f},d=a=>L(a)?a:String(a).split(/\s+|,/),N=(a,f)=>wn.includes(f)?a+"deg":bn.includes(f)?a+"px":a,R=a=>x(a)?a.replace(/(deg)|(px)/g,"").trim():a,K=a=>a.replace(/(path\s*\(\s*["'])|(["']\s*\)\s*$)/g,"").trim().replace(/([a-zA-Z])\s*/g,"$1").replace(/\s+/g,","),z=a=>{let f=/translate\((.*)px,(.*)px\) rotate\((.*)deg\) translate\((.*)px,(.*)px\)\s+/,p=f.exec(a);return p&&Number(p[1])===Number(p[4])*-1&&Number(p[2])===Number(p[5])*-1?a=a.replace(f,`rotate(${p[3]}, ${p[1]}, ${p[2]})`):a=R(a),a},Z=c(e),et=o(t),q=this._el.animate(et,Z);return q.ready.then(()=>l(n)&&n.call(this,q)),q.finished.then(()=>{let a=et[et.length-1];for(let f in a){let p=Rn(f);p.startsWith("text-")?this._el.style[f]=a[f]:f!=="offset"&&f in a&&this._el.setAttribute(p,p===be?K(a[f]):p===Oe?z(a[f]):R(a[f]))}s.forEach(f=>{f[_e](!0);let p=this._el.querySelectorAll(Vt),E=this._el.querySelectorAll(`${Vt}[${_e}]`);p.length===E.length&&p.forEach(_=>_.remove())}),l(i)&&i.call(this,q)}),this}function vn(t){t.extendInstance({animateTo:_n})}var Le=vn;var Me=Symbol(),Ce=Symbol(),B=Symbol(),Et=Symbol(),gt=Symbol(),Ln="unknown",Gt=[],Mn=(t,e,n)=>{throw new Error(t+` in ${e} `+n)};J({name:"g-content",execute(t,{expression:e,data:n,evalExpression:i}){t.content(i(e,n))}});J({name:"g-if",execute(t,{expression:e,data:n,evalExpression:i}){t.style.visibility(i(e,n)?"inherit":"hidden")}});J({name:"g-bind",alias:":",argument:!0,execute(t,{expression:e,argument:n,data:i,evalExpression:r}){let c={...i,$$:["d","transform"].includes(n)?t["$"+n]:()=>t[n]()};c.$$.dynamic=(s,u=200,h=0)=>{t.animateTo((L(s)?s:[s]).map(d=>g(d)&&"offset"in d?{[n]:d.value,offset:d.offset}:{[n]:d}),{duration:u,delay:h})};let o=r(e,c);if(n==="class"){if(L(o)){t.classList.add(...o.filter(s=>!!s));return}if(g(o)){Object.entries(o).forEach(([s,u])=>{u?t.classList.add(s):t.classList.remove(s)});return}o&&t.classList.add(o);return}if(n==="style"){Object.entries(o).forEach(([s,u])=>t.style[s](u));return}y(o)||t[n](o)}});J({name:"g-on",alias:"@",argument:!0,execute(t,{expression:e,argument:n,data:i,evalExpression:r,error:c,outerCode:o}){t[gt]=t[gt]||{};let s=t[gt][n]=t[gt][n]||new Map;s.has(e)&&t.removeEventListener(n,s.get(e));let u=function(h){try{let d=r(e,i,t);l(d)&&d.call(t,h)}catch(d){c(d.message,`g-on:${n}="${e}"`,o)}};t.addEventListener(n,u),s.set(e,u),n==="init"&&!t[Me]&&(t[Me]=!0,t.dispatchEvent(new Event("init")))}});J({name:"g-for",template:!0,execute(t,{expression:e,data:n,error:i}){t[B]=t[B]||[];let r=0;Un(e,n,c=>{if(t[B][r])Nt(t[B][r],c,i,!1);else{let o=t.gSVG("g");t.children().forEach(s=>{o.add(s.cloneNode(!0))}),Nt(o,c,i),t.before(o.el),o[Ce]=!0,t[B].push(o)}r++},c=>{for(;t[B].length>c.length;)t[B].pop().remove()})}});function J({name:t,alias:e,argument:n,template:i,execute:r}){let c=`^(${t}${n?":":""}${e?`|${e})`:")"}${n?"(.*)$":"$"}`,o=new RegExp(c,"i");Gt.push({name:t,alias:e,argument:n,template:i,execute:r,check:o})}function Cn(t){for(let e of Gt){let n=e.check.exec(t);if(n){let i=n[2];return{...e,argument:i}}}}function Pn(t){return t.replace(/[{}()[\]]/g,"").split(",").map(e=>e.includes(":")?e.split(":")[1]:e).map(e=>e.trim())}function In(t){return t[Symbol.iterator]?{iterator:[...t],type:W}:Xt(t)?{iterator:Array(t<0?0:0|t).fill(0).map((e,n)=>n),type:b}:g(t)?{iterator:Object.entries(t).map(e=>e.reverse()),type:$}:{iterator:t,type:Ln}}function Pe(t,e,n=null){let i=Object.keys(e).filter(Ft);return yt(i,`return ( ${t} ); `).apply(n,i.map(c=>e[c]))}function Un(t,e,n,i){let r="__$$iterator",c="__$$callback",o="__$$final",[s,u]=t.split(" of ");s=s.trim(),u=u.trim();let h=Pe(u,e)||[],{iterator:d,type:N}=In(h);N===$&&!s.startsWith("[")&&(s=`[${s.replace(/(^\()|(\)$)/g,"")}]`);let R=Pn(s),K=s.startsWith("(")?s:`(${s})`,z=Object.keys(e).filter(Ft),Z=` ${r}.forEach(${K} => { ${c}({${z}${z.length?",":""}${R.join(",")}}); }); ${o}(${r}); `;return yt([...z,r,c,o],Z)(...z.map(q=>e[q]),d,n,i)}function Nt(t,e,n,i=!0){if(i&&t[Ce])return;let r=t.outerHTML();t[Et]=t[Et]||[];let c=t.attributes();for(let s of[...c]){let u=s.name,h=Cn(u);h&&(t[Et].push({...h,expression:s.value}),t.removeAttribute(u))}let o=!1;for(let s of t[Et]){try{s.execute(t,{...s,data:e,evalExpression:Pe,error:n,outerCode:r})}catch(u){n(u.message,`${s.name}${s.argument?":"+s.argument:""}="${s.expression}"`,r)}o=s.template||o}if(!o)for(let s of t.children())Nt(s,e,n)}function Dn(t={},e=Mn){Nt(this,t,e),this.dispatchEvent(new Event("render"))}function Fn(t){t.install(Le),t.extendInstance({render:Dn}),t.extendSetup({extendTemplate:{defineDirective:J,obtainDirective(e){return Gt.find(n=>n.name===e)}}})}var Ie=Fn;var Bt=Symbol(),Ht=Symbol();function Vn(t,e){return e===Bt?t:re(t,e)}function Ue(t={}){let e={};function n(i,r,c,o){i in t||(e[i]||(e[i]={}),Object.defineProperty(t,i,{enumerable:!1,configurable:!0,writable:!0,value(s=void 0,u=Bt){if(x(s)||y(s)){if(u=s||Bt,u in e[i])return e[i][u]}else t=s;let h=t.reduce((d,N)=>{let R=Vn(N,u);return typeof R>"u"?d:d===Ht?R:c(d,R)},r);return h=typeof o=="function"?o(h):h,t!==s&&(e[i][u]=h),h}}))}return n("$min",Ht,(i,r)=>r>i?i:r),n("$max",Ht,(i,r)=>r<i?i:r),n("$count",0,i=>i+1),n("$sum",0,(i,r)=>r+i),n("$avg",{n:0,i:0},(i,r)=>(i.n++,i.i+=Number(r),i),i=>i.i/i.n),n("$distinct",new Set,(i,r)=>(i.add(r),i),i=>[...i]),t}var kn=t=>{t.extendSetup({extendComposer(e){l(e)?e(C.prototype):Object.assign(C.prototype,e)}})};tt.install(Ie).install(kn);var Gn="composer",zt="update",X="svg",qt="methods",Wt="config",Yt="data",xt="-src",De=t=>`script[type=${t}],g-script[type=${t}]`,Fe=t=>!t||t.baseVal?.value===0,C=class extends k{static install(e){tt.install(e)}#t=null;#n=!1;#r=[];isRendering=!1;#e(e,n="",i=""){let r=`${e}${n?` in ${n}`:""} ${i}`;this.#r.push(r),console.warn(`Graphane Composer - Error: ${r}`),this[A]("error",r)}async#s(e){let n=await fetch(e);if(n.status!==200)throw new Error(`${n.statusText} (${n.status}): ${n.url}`);return n.text()}async#f(){let e=[...this.querySelectorAll(De("plugin"))];for(let n of e){let i=n.getAttribute("src");if(i){let r=new URL(i,document.location.href);try{let c=await import(r.href);c?.default&&tt.install(c.default)}catch(c){this.#e(c.message,"plugin",r)}}}}async#o(){let e=this[m];if(this.#t=null,e.content.innerHTML="",e.svgSrc)try{e.content.innerHTML=await this.#s(e.svgSrc)}catch(i){this.#e(i.message,X,e.svgSrc)}else{let i=this.querySelector("template")?.content||this.querySelector(X);i&&e.content.append(i.cloneNode(!0))}let n=e.content.querySelector(X);return n&&(this.#t=tt(n),Fe(this.#t.width())&&Fe(this.#t.height())&&(this.#t.width("100%"),this.#t.height("100%"))),!0}async#i(e,n){let i=this[m],r=e+"Src",c=this.querySelector(De(e));c&&(i[r]=c.getAttribute("src"));let o="";try{o=i[r]?await this.#s(i[r]):c?.textContent,o&&(i[e]=n(o))}catch(s){this.#e(s.message,e,o)}}#c(){return this.#i(qt,e=>we({$:this},e))}#u(){return this.#i(Wt,St)}#a(){return this.#i(Yt,e=>jt(e)||te(e)?St(e):ee(e))}constructor(){super();let e=this[m];this.shadowRoot.innerHTML=` <style> :host { display : inline-block; width : max-content; height : max-content; } </style><span id="content"></span> `,e.content=this.shadowRoot.querySelector("#content")}[T](){return!this.load()}async[V](e){let n=[];for(let i of e){let r=i.target;if(r===this&&!i.attributeName)return this.load();if(r.tagName.toLowerCase()===X)n.push(this.#o());else if(r.tagName==="SCRIPT"){let c={data:this.#a,methods:this.#c,config:this.#u}[r.type.toLowerCase()];c&&n.push(c())}}if(n.length)return await Promise.all(n),this.update()}async load(){return this.#n=!1,await this.#f(),await Promise.all([this.#o(),this.#u(),this.#c(),this.#a()]),this.#n=!0,this[A]("load"),this.update(!0)}async update(e=!1){if(!(this.isRendering&&!e)&&this.#t){this.rendered=!1,this.isRendering=!0;let n=this[m],i=Ue(n.methods?.data?n.methods.data(F(n.data)):F(n.data)),r={...n.methods,...L(i)?{}:i,data:i,$:this};await this.#t.render(r,this.#e.bind(this)),this.isRendering=!1,this.rendered=!0}}get[X](){return this.#t}get loaded(){return this.#n}get errors(){return[...this.#r]}};C.prototype.update=ue(C.prototype.update,1);le(C).extension(me).attribute({name:X+xt,type:v,value:"",posUpdate:T}).attribute({name:Yt,type:$,value:[],posUpdate:zt}).attribute({name:Yt+xt,type:v,posUpdate:T}).property({name:qt,type:$,value:{},posUpdate:zt}).attribute({name:qt+xt,type:v,posUpdate:T}).attribute({name:Wt,type:$,value:{},posUpdate:zt}).attribute({name:Wt+xt,type:v,posUpdate:T}).tag(Gn);})();