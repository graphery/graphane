/* graphane - 0.1.0-alpha.1 */ (()=>{var gt="function",qt="undefined",N="object",P="string",G="array",b="number",C="boolean",ve="date",_e="symbol",I="",Et=",";var Pe=";",E=t=>typeof t===N,g=t=>typeof t===P,d=t=>typeof t===gt,St=t=>typeof t===b&&!isNaN(t),y=t=>typeof t===qt,Yt=t=>typeof t===_e,Xt=t=>typeof t===C,B=t=>Array.isArray(t),Nt=t=>t instanceof Date&&!isNaN(t),R=t=>t===null,Jt=t=>t.replace(/-([a-z0-9])/g,(e,n)=>n.toUpperCase());function Me(t){if(g(t))try{let e=t.replace(/^\s*{/,"").replace(/}\s*$/,"").split(/((?:[^;^,"']|"[^"]*"|'[^']*')+)/).filter(n=>!["",";",","].includes(n.trim())).map(n=>n.split(":")).map(n=>`"${n[0].trim()}":${Y(n[1].trim(),void 0,!0)}`).join(",");return JSON.parse(`{${e}}`)}catch(e){console.error(e);return}else if(E(t))return t}function Zt(t){if(g(t))return t.trim()[0]==="["?(t.match(/\[(.*?)[^\]]]/g)||[]).map(e=>Zt(e.substring(1,e.length-1))):t.split(/[,;]/).map(e=>Y(e.trim()));if(B(t))return t}function Y(t,e,n=!1){if(!g(t))return t;if(t=Ue(t.trim()),e===G)return Zt(t);if(e===N)return Me(t);if(y(e)||e===b){if(y(t)||t==="")return;let i=+t;if(!Number.isNaN(i)||e===b)return i}if(y(e)||e===C){if(t==="true")return!0;if(t==="false")return!1;if(e===C)return t==="0"?!1:!!t}if(e===ve){try{let i=new Date(t);if(!Number.isNaN(i.getTime()))return i}catch{}return}if(y(e)||e===P)return n?`"${t}"`:t}function Ue(t){return t[0]==="'"&&t[t.length-1]==="'"||t[0]==='"'&&t[t.length-1]==='"'?t.substring(1,t.length-1):t}function Kt(t){return/^\s*{(.|\s)*}\s*$/.test(t)}function Wt(t){return/^\s*\[(.|\s)*]\s*$/.test(t)}function Qt(t){let e=[];return t.split(/(\r\n|\r|\n)/).map(n=>n.trim()).filter(n=>n).reduce((n,i,r)=>{let c={},o=i.split(/((?:[^;^,"']|"[^"]*"|'[^']*')+)/).filter(s=>![I,Pe,Et].includes(s.trim()));return r===0?(e=[...o.map(s=>JSON.parse(s))],n):(o.forEach((s,a)=>{c[e[a]]=JSON.parse(s)}),n.push(c),n)},[])}function xt(t){let e=`return (${t});`,n=new Function(e)();return typeof n=="function"?n():n}function jt(t,e){return new Function("$",`${t};let ___$$$ret = {};${[...t.matchAll(/\s*function\s*(\w*)/gm)].map(n=>`if (typeof ${n[1]} === 'function') ___$$$ret.${n[1]} = ${n[1]};`).join("")} return ___$$$ret;`)(e)}var te=new WeakSet,X=!1,$t=(t,e)=>function n(i){if(te.has(i))return i;for(let c in i)E(i[c])&&!R(i[c])&&(i[c]=n(i[c]));let r=new Proxy(i,{get(c,o){let s=Reflect.get(i,o);return d(s)&&Nt(c)&&g(o)&&o.substring(0,3)==="set"&&d(e)&&(s=function(...a){let u=Reflect.get(c,o).apply(c,a);return!X&&e(t),u}),Nt(c)?s.bind(c):s},set(c,o,s){let a;return E(s)&&!R(s)?a=Reflect.set(c,o,n(s)):a=Reflect.set(c,o,s),!X&&d(e)&&e(t),a},deleteProperty(c,o){let s=Reflect.deleteProperty(c,o);return!X&&d(e)&&e(t),s}});return te.add(r),r}(t);$t.stop=()=>X=!0;$t.start=()=>X=!1;var tt=$t;var J=!1,et=!0;function Le(t){return t===null?null:t.constructor?new t.constructor:{}}function H(t){if(!E(t))return t;let e=t===null?null:Object.assign(Le(t),t);for(let n in e)E(e[n])&&(e[n]=H(e[n]));return e}function ee(t,e){let n=[],i=[];function r(o,s){if(o===null||s===null)return J;if(d(o.valueOf)&&d(s.valueOf)&&(o!==o.valueOf()||s!==s.valueOf()))return o.valueOf()===s.valueOf()&&o.constructor===s.constructor;if(n.indexOf(o)>-1&&i.indexOf(s)>-1)return et;let a=Object.keys(o),u=Object.keys(s);if(a.length!==u.length)return J;if(a.length>0){n.push(o),i.push(s);let p=a.length;for(;p--;){let M=a[p];if(!c(o[M],s[M]))return J}}return et}function c(o,s){if(o===s)return et;let a=typeof o;return a!==typeof s?J:a===b&&isNaN(o)&&isNaN(s)?et:a===N?r(o,s):J}return c(t,e)}function ne(t,e){let n=t,i=g(e)?e.split("."):e;for(let r=0;r<i.length;r++){if(y(n[i[r]]))return;n=n[i[r]]}return n}var it=globalThis.GRAPHANE_PREFIX||"g-",Ce=Symbol(),h=Symbol(),Z=Symbol(),x=Symbol(),wt=Object.defineProperty;function Ie(t,e,n,i=!1){if(!(t.ready===!1||!e))if(i)n?t.setAttribute(e,I):t.removeAttribute(e);else{let r=R(n)||y(n)?I:n.toString();t.hasAttribute(e)&&t.getAttribute(e)!==r&&t.setAttribute(e,r)}}function De(t){this[h]={};let e=t;do{let n=nt.get(e);for(let i in n)if(n.hasOwnProperty(i)&&this.hasOwnProperty(i)){let r=this[i];delete this[i],this[i]=y(r)?H(n[i]):r}else i in this[h]||(this[h][i]=H(n[i]));e=Object.getPrototypeOf(e)}while(e!==HTMLElement)}function Fe(){new MutationObserver(t=>{for(let e of t)if(!e.attributeName){this[x]("update");break}(y(this.ready)||this.ready)&&d(this[Z])&&this[Z](t)}).observe(this,{attributes:!0,childList:!0,subtree:!0,characterData:!0})}var nt=new WeakMap,rt=class extends HTMLElement{constructor(){super(),De.call(this,new.target),new.target[Ce]?.forEach(e=>d(e)&&e.call(this,this)),d(this[Z])&&Fe.call(this)}[x](e,n={},i=!1){return this.dispatchEvent(new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n,composed:i}))}};function Ve(t,e){e.propertyName||(e.propertyName=Jt(e.name)),ie(t,{name:e.propertyName,value:e.value,get:e.get,set:e.set,attribute:e.name,type:e.type,preUpdate:e.preUpdate,posUpdate:e.posUpdate,posUpdateEvent:e.posUpdateEvent,schema:e.schema});let n=Object.getPrototypeOf(t),i="observedAttributes",r=Object.getOwnPropertyDescriptor(t,i),c=Object.getOwnPropertyDescriptor(n,i),o=r?r.get:void 0;wt(t,i,Ge(t,e,n,o,r,c));let s="attributeChangedCallback",a=Object.getOwnPropertyDescriptor(t.prototype,s),u=Object.getOwnPropertyDescriptor(n.prototype,s),p=a?a.value:void 0;wt(t.prototype,s,ke(e,p,u))}function ke(t,e,n){return{value:function(i,r,c){if(t.name===i){let o=t.propertyName;this[o]!==c&&(t.type===C?this[o]=this.hasAttribute(t.name):this[o]=Y(c,t.type))}else e&&e.apply(this,arguments);n?.value&&n.value.apply(this,arguments)},enumerable:!1,writable:!0,configurable:!0}}function Ge(t,e,n,i,r,c){let o={enumerable:!1,configurable:!0};return r?c?o.get=function(){return[e.name,...i.call(t),...c.get.call(n)]}:o.get=function(){return[e.name,...i.call(t)]}:c?o.get=function(){return[e.name,...c.get.call(n)]}:o.get=function(){return[e.name]},o}function ie(t,e){wt(t.prototype,e.name,{set:re(e),get:He(e),configurable:!0,enumerable:!1}),nt.has(t)||nt.set(t,{}),nt.get(t)[e.name]=e.value}function Be(t,e){R(t.posUpdateEvent)||(t.posUpdateEvent?this[x](t.posUpdateEvent,{[t.name]:e}):this[x]("update",{[t.name]:e})),d(t.posUpdate)?t.posUpdate.call(this,e):d(this[t.posUpdate])&&this[t.posUpdate]()}function re(t){return function(e){let n=this[h];d(t.preUpdate)&&!t.preUpdate.call(this,e)||(t.schema&&(tt.stop(),e=t.schema.normalize(e),tt.start()),!(!E(e)&&ee(n[t.name],e))&&(d(t.set)?t.set.call(this,e):g(e)&&t.type?n[t.name]=Y(e,t.type):n[t.name]=e,t.attribute&&![G,N].includes(t.type)&&Ie(this,t.name,e,t.type===C),Be.call(this,t,e)))}}function He(t){return function(){if(d(t.get))return t.get.call(this);{let e=this[h];switch(t.type){case b:return y(e[t.name])?void 0:Number(e[t.name]);case C:return!!e[t.name];case N:case G:return tt(e[t.name]||(t.type===N?{}:[]),n=>re(t).call(this,n));default:return e[t.name]}}}}function ze(t,e){customElements.get(it+e.toLowerCase())||customElements.define(it+e.toLowerCase(),t)}function se(t,e={}){return e.property=(...n)=>(n.forEach(i=>ie(t,Object.assign({},i))),e),e.attribute=(...n)=>(n.forEach(i=>Ve(t,Object.assign({},i))),e),e.tag=n=>(ze(t,n),e),e.extension=n=>(n.call(e,e,t),e),e}function At(t,e){let n=new WeakMap,i=[];return function(...r){return clearTimeout(n.get(this)),new Promise((c,o)=>{i.push({resolve:c,reject:o}),n.set(this,setTimeout(()=>{try{let s=t.apply(this,r);i.forEach(a=>a.resolve(s))}catch(s){i.forEach(a=>a.reject(s))}finally{i.length=0}},e))})}}function Tt(t,e){return function(...n){if(t.apply(this,n))return e.apply(this,n)}}function Ot(t,e){return function(...n){let i=t.apply(this,n);return i instanceof Promise?i.then(r=>e.call(this,r)||r):e.call(this,i)||i}}var oe=1,z=Symbol(),A=Symbol(),ce=Symbol(),st=Symbol();var D=class extends rt{constructor(e){super(),this.attachShadow({mode:"open"}),this[h].ready=e||!1,this[h].rendered=!1,y(e)&&(this.ready=!0)}get ready(){return this[h].ready}set ready(e){let n=this[h],i=n.ready;n.ready=!!e,i===!1&&n.ready===!0&&(this[x]("ready",{ready:!0}),d(this[A])&&this[A]())}get rendered(){return this[h].rendered}set rendered(e){let n=this[h],i=n.rendered;n.rendered=!!e,i===!1&&n.rendered===!0&&this[x]("render",{rendered:!0})}connectedCallback(){let e=this.getBoundingClientRect(),n=getComputedStyle(this).flexDirection,i=()=>{let{width:r,height:c}=this.getBoundingClientRect(),o=getComputedStyle(this).flexDirection;(r!==e.width||c!==e.height||o!==n)&&(d(this[ce])&&this[ce](r,c,r-e.width,c-e.height),e={width:r,height:c},n=o,this[x]("resize",e)),this[h]._resizeObserver=window.requestAnimationFrame(i)};i()}disconnectedCallback(){window.cancelAnimationFrame(this[h]._resizeObserver)}};function qe(t,e){"value"in e&&!("initialValue"in e)&&(e.initialValue=e.value);let n=Object.assign({syntax:"*",inherits:!0},e);n.name.substring(0,2)!=="--"&&(n.name=`--${it}${n.name}`),t[st]||(t[st]={}),t[st][n.name]=n,console.log(t[st])}function Ye(t){if(d(t.prototype[A])){let e=t.prototype[A];t.prototype[A]=Tt(function(){return this.rendered=!1,this.ready},At(Ot(async function(){return e.apply(this)},function(n){this.rendered=n!==!1,this.rendered&&d(this[z])&&this[z]()}),oe))}if(d(t.prototype[z])){let e=t.prototype[z];t.prototype[z]=Tt(function(n){return n&&(this[h].rendered=!0),this.ready&&this[h].rendered},At(Ot(async function(...n){return e.apply(this,n)},function(){this[x]("refresh")}),oe))}}function ae(t){Ye(t);let e=se(t,{style:(...n)=>(n.forEach(i=>qe(t,Object.assign({},i))),e)});return e}D.RENDER=A;D.REFRESH=z;D.CHANGE=Z;var Xe="enterViewport",Je="exitViewport",ot=Symbol(),Ze={root:null,rootMargin:"0px",threshold:[0,.5,.1,.15,.2,.25,.3,.35,.4,.45,.5,.55,.6,.65,.7,.75,.8,.85,.9,.95,1]};function Ke(t){t.attribute({name:"viewport-once-class",type:P,value:"",posUpdate:bt}).attribute({name:"viewport-class",type:P,value:"",posUpdate:bt}).attribute({name:"viewport-ratio",type:b,value:0,posUpdate:bt})}function ue(t,e){e&&e.split(" ").forEach(n=>t.add(n))}function We(t,e){e&&e.split(" ").forEach(n=>t.remove(n))}function bt(){let t=this[h],e=this.classList,n=!1;this[ot]&&this[ot].disconnect(),this[ot]=new IntersectionObserver(i=>{i.forEach(r=>{r.isIntersecting&&r.intersectionRatio>=t.viewportRatio?n||(ue(e,t.viewportOnceClass),ue(e,t.viewportClass),n=!0,this[x](Xe)):n&&(We(e,t.viewportClass),n=!1,this[x](Je))})},Ze),this[ot].observe(this)}var fe=Ke;var Pt="gSVGObject",Qe="http://www.w3.org/2000/svg",je="svg",tn="path",ct="d",Rt=new WeakMap,vt=new Set,en=t=>t[0]==="_"||Yt(t)||["el","gSVG"].includes(t),at=(t,e)=>t instanceof e,nn=()=>Pt+Math.random().toString(32).substring(2),Mt=t=>E(t)&&!R(t)&&t[Symbol.toStringTag]===Pt,rn=t=>ft(document.createElementNS(Qe,t)),_t=t=>g(t)?rn(t):E(t)&&t!==null?Mt(t)?t:ft(t):t,sn=t=>({content:"innerHTML",source:"outerHTML",parent:"parentElement",next:"nextElementSibling",previous:"previousElementSibling"})[t]||t,K=class{constructor(e){this._el=e,this.gSVG=v}get[Symbol.toStringTag](){return Pt}get el(){return this._el}add(e){let n=_t(e);return n&&this._el.appendChild(n._el),n}addBefore(e){let n=_t(e);return n&&this._el.insertBefore(n._el,this._el.firstChild||null),n}attachTo(e){return(E(e)?Mt(e)?e._el:e:document.querySelector(e)).appendChild(this._el),this}id(e){return e?(this._el.setAttribute("id",e),this):this._el.id||(this._el.id=nn())}ref(){return`#${this.id()}`}url(){return`url(${this.ref()})`}},ft=t=>{if(!E(t)||R(t))return null;if(Rt.has(t))return Rt.get(t);let e=new Proxy(new K(t),{get(n,i){if(en(i))return n[i];if(!y(n[i]))return(...r)=>(F(e,i,r),n[i].call(e,...r));if(i===ct&&t.tagName.toLowerCase()===tn){let r=t.getAttribute(ct)||"",c=new Proxy(o=>(F(e,i,[o]),g(o)?t.setAttribute(ct,o)||e:t.getAttribute(ct)),{get(o,s){return(...a)=>(r+=le(e,s,a),t?.setAttribute(i,r),c)}});return c}if(i==="$d"){let r="",c=new Proxy({},{get(o,s){return(...a)=>{if(s===Symbol.toPrimitive)return r;let u=le(e,s,a);return r+=u,c}}});return c}return i=sn(i),d(t[i])?(...r)=>{F(e,i,r);let c=t[i].call(t,...r);return y(c)?e:he(c)}:de(t,i,e)}});return Rt.set(t,e),e},de=(t,e,n,i)=>{let r=e.replace(/_/g,"-"),c=(...o)=>{if(F(n,i?`${i}.${e}`:e,o),o.length===0){let a=t?.hasAttribute&&t.hasAttribute(r)?t.getAttribute(r):t[r];return he(a)}let s=o[0];if(at(t,CSSStyleDeclaration))return t[r]=s,n;if(r in t&&!vt.has(r)){let a=t[r];if(String(a)===String(s))return n;try{t[r]=s}catch{vt.add(r)}if(E(t[r])&&t[r]===s||t[r]!==a)return n;vt.add(r)}return s!==0&&!s?t?.removeAttribute&&t.removeAttribute(r):t?.setAttribute&&t.setAttribute(r,Xt(s)?"":String(o)),n};return new Proxy(c,{get(o,s){let a=t[r][s];return d(a)?(...u)=>(F(n,`${e}.${s}`,u),a.call(t[r],...u)||n):de(t[r],s,n,r)},set(o,s,a){return t[r][s]=a,!0}})},he=t=>at(t,HTMLCollection)||at(t,NodeList)?[...t].map(e=>ft(e)):at(t,SVGElement)?ft(t):g(t)?t===""||Number.isNaN(Number(t))?t:Number(t):t,pe=[],F=(t,e,n,i=[])=>{for(let r of pe)r(v,t,e,n,i)},ut={},le=(t,e,n)=>(F(t,`d.${e}`,n,Object.keys(ut).map(i=>`d.${i}`)),ut[e]?ut[e].apply(t,n):`${e}${n.join(Et)}`);function v(t){return F(null,I,[t]),_t(y(t)?je:t)}v.isWrapped=Mt;v.extend=t=>(console.warn("gSVG.extend() for old plugin is deprecated. Please, use gSVG.install() for new plugins."),t(v,K),v);var me={install:Ut,installAsync:Lt,extendConstructor(t){Object.assign(v,t)},extendInstance(t){Object.assign(K.prototype,t)},extendPath(t){Object.assign(ut,t)},extendSetup(t){Object.assign(me,t)},beforeEveryCall(t){typeof t===gt&&pe.push(t)}};function Ut(t){return g(t)?Lt(t):(t(me),v)}v.install=Ut;async function Lt(t){let e=(await import(t)).default;return Ut(e)}v.installAsync=Lt;var lt=v;var ye="SVG",Ct="animate",on="none",cn="freeze",an="path",ge="d",un="transform",xe="rotate",It="translate",fn="offset",Ee="inherit",Se="finished",ln=[xe,"skewX","skewY"],dn="deg",W="px",Ne="ms",Dt=!1;if(window.matchMedia){let t=window.matchMedia("(prefers-reduced-motion: reduce)");Dt=t.matches,t.addEventListener("change",()=>{Dt=t.matches})}var hn=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase();function pn(t,e={duration:200},n=null,i=null){let r=this.gSVG,c=f=>{let l=E(f)?Object.assign({},f):{duration:f};return Dt&&(l.duration=0),l.fill=on,l},o=f=>{f=B(f)?f:[f];let l=window.getComputedStyle(this._el),m=[],S=new Set;for(let _ of f){let O=Object.assign({},_);for(let w in O)w in l?w===ge?O.d=`${an}("${O.d}")`:w===un&&(O.transform=u(O.transform)):S.add(w);m.push(O)}return a(S,m),m},s=[],a=(f,l)=>{if(f.size){let m=new KeyframeEffect(null,l).getKeyframes(),S=this.closest(ye)?this.closest(ye).getCurrentTime()*1e3:0;for(let _ of f){let O=r(Ct).attributeName(_).dur($.duration+Ne).begin((0|S+(e.delay||0))+Ne).fill(cn);if(l.length===1)O.to(l[0][_]);else{let w=[],j=[];for(let yt in m){let Re=m[yt];_ in l[yt]&&(w.push(Re.computedOffset),j.push(l[yt][_]))}w[0]!==0&&(w.unshift(0),j.unshift(this[_]()||Ee)),w[w.length-1]!==1&&(w.push(1),j.push(this[_]()||Ee)),O.keyTimes(w.join(";")).values(j.join(";"))}s.push(O),O.attachTo(this)}}},u=f=>{g(f)&&(f=JSON.parse("{"+f.replace(/\s*\(\s*/g,":[").replace(/\s*\)\s*/g,"],").split(/\s*,\s*|\s.*/).join(",").replace(/(\w+):/g,'"$1":').replace(/,$/,"")+"}"));let l="";for(let m in f)if(m===xe){let S=p(f[m]);S.length>1&&(l+=`${It}(${S[1]}${W},${S[2]}${W}) `),l+=`${m}(${S[0]}${M(m)}) `,S.length>1&&(l+=`${It}(-${S[1]}${W},-${S[2]}${W}) `)}else l+=`${m}(${p(f[m]).map(S=>S+M(m)).join(",")}) `;return l},p=f=>B(f)?f:String(f).split(/\s+|,/),M=f=>ln.includes(f)?dn:f===It?W:"",k=f=>g(f)?f.replace(/(deg)|(px)/g,"").trim():f,U=f=>f.replace(/(path\s*\(\s*["'])|(["']\s*\)\s*$)/g,"").trim().replace(/([a-zA-Z])\s*/g,"$1").replace(/\s+/g,","),$=c(e),T=o(t),L=this._el.animate(T,$);return L.ready.then(()=>d(n)&&n.call(this,L)),L.finished.then(()=>{let f=T[T.length-1];for(let l in f){let m=hn(l);/^text-/.test(m)?this._el.style[l]=f[l]:l!==fn&&l in f&&this._el.setAttribute(m,m===ge?U(f[l]):k(f[l]))}s.forEach(l=>{l[Se](!0);let m=this._el.querySelectorAll(Ct),S=this._el.querySelectorAll(`${Ct}[${Se}]`);m.length===S.length&&m.forEach(_=>_.remove())}),d(i)&&i.call(this,L)}),this}function Q(t){t.extendInstance({animateTo:pn})}var Ft=new Map;function Vt(t,e){let n=`${t.join(",")} ${e}`;if(Ft.has(n))return Ft.get(n);let i=new Function(...t,e);return Ft.set(n,i),i}var Gt=Symbol(),kt=Symbol();function mn(t,e){return e===Gt?t:ne(t,e)}function $e(t){let e={};function n(u,p,M,k){return e[u]||(e[u]={}),(U=void 0,$=Gt)=>{if(g(U)||y(U)){if($=U||Gt,$ in e[u])return e[u][$]}else t=U;let T=t.reduce((L,f)=>{let l=mn(f,$);return typeof l>"u"?L:L===kt?l:M(L,l)},p);return T=typeof k=="function"?k(T):T,t!==U&&(e[u][$]=T),T}}let i=n("min",kt,(u,p)=>p>u?u:p),r=n("max",kt,(u,p)=>p<u?u:p),c=n("count",0,u=>u+1),o=n("sum",0,(u,p)=>p+u),s=n("avg",{n:0,i:0},(u,p)=>(u.n++,u.i+=Number(p),u),u=>u.i/u.n),a=n("distinct",new Set,(u,p)=>(u.add(p),u),u=>[...u]);return{min:i,max:r,sum:o,count:c,avg:s,distinct:a}}var we=Symbol(),V=Symbol(),dt=Symbol(),ht=Symbol(),yn="unknown",Ae="Graphane SVG Template Engine:",Bt=[],gn=t=>t.reduce((e,n)=>(e[n]=(...i)=>`${n}(${i.join(",")}) `,e),{}),En=["transform","gradientTransform","patternTransform"],Sn=gn(["matrix","matrix3d","perspective","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"]);q({name:"g-content",execute(t,{expression:e,data:n,evalExpression:i}){t.content(i(e,n))}});q({name:"g-if",execute(t,{expression:e,data:n,evalExpression:i}){t.style.visibility(i(e,n)?"inherit":"hidden")}});q({name:"g-bind",alias:":",argument:!0,execute(t,{expression:e,argument:n,data:i,evalExpression:r}){let c={...i,...En.includes(n)?Sn:{},$:{...i.$,d:n==="d"?t.$d:void 0,animate(s,a=200,u=0){t.animateTo({[n]:s},{duration:a,delay:u})}}},o=r(e,c);if(n==="class"){if(B(o)){t.classList.add(...o.filter(s=>!!s));return}if(E(o)){Object.entries(o).forEach(([s,a])=>{a?t.classList.add(s):t.classList.remove(s)});return}o&&t.classList.add(o);return}if(n==="style"){Object.entries(o).forEach(([s,a])=>t.style[s](a));return}y(o)||t[n](n==="d"?""+o:o)}});q({name:"g-on",alias:"@",argument:!0,execute(t,{expression:e,argument:n,data:i,evalExpression:r}){t[ht]=t[ht]||{};let c=t[ht][n]=t[ht][n]||new Map;c.has(e)&&t.removeEventListener(n,c[e]);let o=function(s){let a=r(e,i);d(a)&&a.call(this,s)};t.addEventListener(n,o),c.set(e,o),n==="load"&&t.dispatchEvent(new Event("load"))}});q({name:"g-for",template:!0,execute(t,{expression:e,data:n}){t[V]=t[V]||[];let i=0;wn(e,n,r=>{if(t[V][i])pt(t[V][i],r,!1);else{let c=t.gSVG("g");t.children().forEach(o=>{c.add(o.cloneNode(!0))}),pt(c,r),t.before(c.el),c[we]=!0,t[V].push(c)}i++},r=>{for(;t[V].length>r.length;)t[V].pop().remove()})}});function q({name:t,alias:e,argument:n,template:i,execute:r}){let c=`^(${t}${n?":":""}${e?`|${e})`:")"}${n?"(.*)$":"$"}`,o=new RegExp(c,"i");Bt.push({name:t,alias:e,argument:n,template:i,execute:r,check:o})}function Nn(t){for(let e of Bt){let n=e.check.exec(t);if(n){let i=n[2];return{...e,argument:i}}}}function xn(t){return t.replace(/[{}()[\]]/g,"").split(",").map(e=>e.includes(":")?e.split(":")[1]:e).map(e=>e.trim())}function $n(t){return t[Symbol.iterator]?{iterator:[...t],type:G}:St(t)?{iterator:Array(t<0?0:t).fill(0).map((e,n)=>n),type:b}:E(t)?{iterator:Object.entries(t).map(e=>e.reverse()),type:N}:{iterator:t,type:yn}}function Te(t,e){try{return Vt(Object.keys(e).filter(i=>!St(i)),`return ( ${t} ); `)(...Object.values(e))}catch(n){console.warn(Ae,n.message)}}function wn(t,e,n,i){let r="__$$iterator",c="__$$callback",o="__$$final";try{let[s,a]=t.split(" of ");s=s.trim(),a=a.trim();let u=Te(a,e)||[],{iterator:p,type:M}=$n(u);M===N&&s[0]!=="["&&(s=`[${s.replace(/(^\()|(\)$)/g,"")}]`);let k=xn(s),U=s[0]!=="("?`(${s})`:s,$=Object.keys(e),T=` ${r}.forEach(${U} => { ${c}({${$}${$.length?",":""}${k.join(",")}}); }); ${o}(${r}); `;return Vt([...$,r,c,o],T)(...Object.values(e),p,n,i)}catch(s){console.warn(Ae,s)}}function pt(t,e,n=!0){if(n&&t[we])return;t[dt]=t[dt]||[];let i=t.attributes();for(let c of[...i]){let o=c.name,s=Nn(o);s&&(t[dt].push({...s,expression:c.value}),t.removeAttribute(o))}let r=!1;for(let c of t[dt])c.execute(t,{...c,data:e,evalExpression:Te}),r=c.template||r;if(!r)for(let c of t.children())pt(c,e)}function An(t={}){pt(this,{...t,...Array.isArray(t.data)?{}:t.data,$:t.data?{...t.$,...$e(t.data),data:t.data,rawData:H(t.data)}:{}})}function Ht(t){Q(t),t.extendInstance({render:An}),t.extendSetup({extendTemplate:{defineDirective:q,obtainDirective(e){return Bt.find(n=>n.name===e)}}})}lt.install(Q).install(Ht);var Tn="template",Oe="svg",On="--internal-width",zt="update",be=t=>`script[type=${t}],g-script[type=${t}]`,mt=class extends D{#t=null;#e=!1;async#i(e){let n=await fetch(e);if(n.status!==200)throw new Error(`${n.statusText} (${n.status}): ${n.url}`);return n.text()}async#r(){let e=[...this.querySelectorAll(be("plugin"))];for(let n of e){let i=n.getAttribute("src");if(i){let r=(await import(i)).default;lt.install(r)}}}async#s(){let e=this[h];if(this.#t=null,e.content.innerHTML="",e.svgSrc)e.content.innerHTML=await this.#i(e.svgSrc);else{let i=this.querySelector("template")?.content||this.querySelector(Oe);i&&e.content.append(i.cloneNode(!0))}let n=e.content.querySelector(Oe);if(n){this.#t=lt(n);let i=this.#t.viewBox(),r=g(i)?i.split(/\s|;/)[3]:0;this.shadowRoot.host.style.setProperty(On,`${r||250}px`)}return!0}async#n(e){let n=this[h],i=e+"Src",r=this.querySelector(be(e));return r&&(n[i]=r.getAttribute("src")),n[i]?this.#i(n[i]):r?.textContent}async#o(){let e=await this.#n("methods");e&&(this[h].methods=jt(e,this))}async#c(){let e=await this.#n("config");e&&(this[h].config=xt(e))}async#a(){let e=await this.#n("data");e&&(this[h].data=Kt(e)||Wt(e)?xt(e):Qt(e))}constructor(){super();let e=this[h];this.shadowRoot.innerHTML=` <style> :host { display : inline-block; width : var(--internal-width, 250px); height : auto; } :host([hidden]) { display : none; } </style><span id="content"></span> `,e.content=this.shadowRoot.querySelector("#content")}async[A](){await this.load()}async load(){try{this.#e=!1,await this.#r(),await Promise.all([this.#s(),this.#c(),this.#o(),this.#a()]),this.#e=!0}catch(e){return console.error(e.message),this[x]("error",e.message),!1}this.update(!0)}update(e=!1){if(!(!this.rendered&&!e)&&this.#t){this.rendered=!1;let n=this[h],i={...n.methods,data:n.data,$:{config:n.config,svg:this.#t}};this.#t.render(i),this.rendered=!0}}get svg(){return this.#t}get loaded(){return this.#e}};ae(mt).extension(fe).attribute({name:"svg-src",type:P,value:"",posUpdate:A}).attribute({name:"data",type:N,value:[],posUpdate:zt}).attribute({name:"data-src",type:P,posUpdate:A}).property({name:"methods",type:N,value:{},posUpdate:zt}).attribute({name:"methods-src",type:P,posUpdate:A}).attribute({name:"config",type:N,value:{},posUpdate:zt}).attribute({name:"config-src",type:P,posUpdate:A}).tag(Tn);})(); //# sourceMappingURL=template.js.map