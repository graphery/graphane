/* graphane - 0.1.0-alpha.3 */ var se="function",Y="undefined",m="object",w="string",C="array",d="number",x="boolean",ce="date";var _="";var h=e=>typeof e===m,y=e=>typeof e===w,u=e=>typeof e===se;var p=e=>typeof e===Y;var ue=e=>Array.isArray(e),k=e=>e instanceof Date&&!isNaN(e),g=e=>e===null,W=e=>e.replace(/-([a-z0-9])/g,(t,n)=>n.toUpperCase());function fe(e){if(y(e))try{let t=e.replace(/^\s*{/,"").replace(/}\s*$/,"").split(/((?:[^;^,"']|"[^"]*"|'[^']*')+)/).filter(n=>!["",";",","].includes(n.trim())).map(n=>n.split(":")).map(n=>`"${n[0].trim()}":${T(n[1].trim(),void 0,!0)}`).join(",");return JSON.parse(`{${t}}`)}catch(t){console.error(t);return}else if(h(e))return e}function q(e){if(y(e))return e.trim()[0]==="["?(e.match(/\[(.*?)[^\]]]/g)||[]).map(t=>q(t.substring(1,t.length-1))):e.split(/[,;]/).map(t=>T(t.trim()));if(ue(e))return e}function T(e,t,n=!1){if(!y(e))return e;if(e=le(e.trim()),t===C)return q(e);if(t===m)return fe(e);if(p(t)||t===d){if(p(e)||e==="")return;let r=+e;if(!Number.isNaN(r)||t===d)return r}if(p(t)||t===x){if(e==="true")return!0;if(e==="false")return!1;if(t===x)return e==="0"?!1:!!e}if(t===ce){try{let r=new Date(e);if(!Number.isNaN(r.getTime()))return r}catch{}return}if(p(t)||t===w)return n?`"${e}"`:e}function le(e){return e[0]==="'"&&e[e.length-1]==="'"||e[0]==='"'&&e[e.length-1]==='"'?e.substring(1,e.length-1):e}var K=new WeakSet,A=!1,V=(e,t)=>u(t)?function n(r){if(K.has(r))return r;for(let o in r)h(r[o])&&!g(r[o])&&(r[o]=n(r[o]));let s=new Proxy(r,{get(o,i){let c=Reflect.get(r,i);return u(c)&&k(o)&&y(i)&&i.substring(0,3)==="set"&&u(t)&&(c=function(...f){let E=Reflect.get(o,i).apply(o,f);return!A&&t(e),E}),k(o)?c.bind(o):c},set(o,i,c){let f;return h(c)&&!g(c)?f=Reflect.set(o,i,n(c)):f=Reflect.set(o,i,c),!A&&t(e),f},deleteProperty(o,i){let c=Reflect.deleteProperty(o,i);return!A&&t(e),c}});return K.add(s),s}(e):e;V.stop=()=>A=!0;V.start=()=>A=!1;var I=V;var R=!1,M=!0;function pe(e){return e===null?null:e.constructor?new e.constructor:{}}function D(e){if(!h(e))return e;let t=e===null?null:Object.assign(pe(e),e);for(let n in t)h(t[n])&&(t[n]=D(t[n]));return t}function Q(e,t){let n=[],r=[];function s(i,c){if(i===null||c===null)return R;if(u(i.valueOf)&&u(c.valueOf)&&(i!==i.valueOf()||c!==c.valueOf()))return i.valueOf()===c.valueOf()&&i.constructor===c.constructor;if(n.indexOf(i)>-1&&r.indexOf(c)>-1)return M;let f=Object.keys(i),E=Object.keys(c);if(f.length!==E.length)return R;if(f.length>0){n.push(i),r.push(c);let b=f.length;for(;b--;){let X=f[b];if(!o(i[X],c[X]))return R}}return M}function o(i,c){if(i===c)return M;let f=typeof i;return f!==typeof c?R:f===d&&isNaN(i)&&isNaN(c)?M:f===m?s(i,c):R}return o(e,t)}var N=globalThis.GRAPHANE_PREFIX||"g-",ae=Symbol(),l=Symbol(),$=Symbol(),a=Symbol(),B=Object.defineProperty;function he(e,t,n,r=!1){if(!(e.ready===!1||!t))if(r)n?e.setAttribute(t,_):e.removeAttribute(t);else{let s=g(n)||p(n)?_:n.toString();e.hasAttribute(t)&&e.getAttribute(t)!==s&&e.setAttribute(t,s)}}function de(e){this[l]={};let t=e;do{let n=v.get(t);for(let r in n)if(n.hasOwnProperty(r)&&this.hasOwnProperty(r)){let s=this[r];delete this[r],this[r]=p(s)?D(n[r]):s}else r in this[l]||(this[l][r]=D(n[r]));t=Object.getPrototypeOf(t)}while(t!==HTMLElement)}function me(){new MutationObserver(e=>{for(let t of e)if(!t.attributeName){this[a]("update");break}(p(this.ready)||this.ready)&&u(this[$])&&this[$](e)}).observe(this,{attributes:!0,childList:!0,subtree:!0,characterData:!0})}var v=new WeakMap,F=class extends HTMLElement{constructor(){super(),de.call(this,new.target),new.target[ae]?.forEach(t=>u(t)&&t.call(this,this)),u(this[$])&&me.call(this)}[a](t,n={},r=!1){return this.dispatchEvent(new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n,composed:r}))}};function ye(e,t){t.propertyName||(t.propertyName=W(t.name)),Z(e,{name:t.propertyName,value:t.value,get:t.get,set:t.set,attribute:t.name,type:t.type,preUpdate:t.preUpdate,posUpdate:t.posUpdate,posUpdateEvent:t.posUpdateEvent,schema:t.schema});let n=Object.getPrototypeOf(e),r="observedAttributes",s=Object.getOwnPropertyDescriptor(e,r),o=Object.getOwnPropertyDescriptor(n,r),i=s?s.get:void 0;B(e,r,Ee(e,t,n,i,s,o));let c="attributeChangedCallback",f=Object.getOwnPropertyDescriptor(e.prototype,c),E=Object.getOwnPropertyDescriptor(n.prototype,c),b=f?f.value:void 0;B(e.prototype,c,ge(t,b,E))}function ge(e,t,n){return{value:function(r,s,o){if(e.name===r){let i=e.propertyName;this[i]!==o&&(e.type===x?this[i]=this.hasAttribute(e.name):this[i]=T(o,e.type))}else t&&t.apply(this,arguments);n?.value&&n.value.apply(this,arguments)},enumerable:!1,writable:!0,configurable:!0}}function Ee(e,t,n,r,s,o){let i={enumerable:!1,configurable:!0};return s?o?i.get=function(){return[t.name,...r.call(e),...o.get.call(n)]}:i.get=function(){return[t.name,...r.call(e)]}:o?i.get=function(){return[t.name,...o.get.call(n)]}:i.get=function(){return[t.name]},i}function Z(e,t){B(e.prototype,t.name,{set:j(t),get:Ne(t),configurable:!0,enumerable:!1}),v.has(e)||v.set(e,{}),v.get(e)[t.name]=t.value}function xe(e,t){g(e.posUpdateEvent)||(e.posUpdateEvent?this[a](e.posUpdateEvent,{[e.name]:t}):this[a]("update",{[e.name]:t})),u(e.posUpdate)?e.posUpdate.call(this,t):u(this[e.posUpdate])&&this[e.posUpdate]()}function j(e){return function(t){let n=this[l];u(e.preUpdate)&&!e.preUpdate.call(this,t)||(e.schema&&(I.stop(),t=e.schema.normalize(t),I.start()),!(!h(t)&&Q(n[e.name],t))&&(u(e.set)?e.set.call(this,t):y(t)&&e.type?n[e.name]=T(t,e.type):n[e.name]=t,e.attribute&&![C,m].includes(e.type)&&he(this,e.name,t,e.type===x),xe.call(this,e,t)))}}function Ne(e){return function(){if(u(e.get))return e.get.call(this);{let t=this[l];switch(e.type){case d:return p(t[e.name])?void 0:Number(t[e.name]);case x:return!!t[e.name];case m:case C:return I(t[e.name]||(e.type===m?{}:[]),n=>j(e).call(this,n));default:return t[e.name]}}}}function Oe(e,t){customElements.get(N+t.toLowerCase())||customElements.define(N+t.toLowerCase(),e)}function ee(e,t={}){return t.property=(...n)=>(n.forEach(r=>Z(e,Object.assign({},r))),t),t.attribute=(...n)=>(n.forEach(r=>ye(e,Object.assign({},r))),t),t.tag=n=>(Oe(e,n),t),t.extension=n=>(n.call(t,t,e),t),t}function z(e,t){let n=new WeakMap,r=[];return function(...s){return clearTimeout(n.get(this)),new Promise((o,i)=>{r.push({resolve:o,reject:i}),n.set(this,setTimeout(()=>{try{let c=e.apply(this,s);r.forEach(f=>f.resolve(c))}catch(c){r.forEach(f=>f.reject(c))}finally{r.length=0}},t))})}}function G(e,t){return function(...n){if(e.apply(this,n))return t.apply(this,n)}}function H(e,t){return function(...n){let r=e.apply(this,n);return r instanceof Promise?r.then(s=>t.call(this,s)||s):t.call(this,r)||r}}var te=1,O=Symbol(),S=Symbol(),ne=Symbol(),P=Symbol();var U=class extends F{constructor(t){super(),this.attachShadow({mode:"open"}),this[l].ready=t||!1,this[l].rendered=!1,p(t)&&(this.ready=!0)}get ready(){return this[l].ready}set ready(t){let n=this[l],r=n.ready;n.ready=!!t,r===!1&&n.ready===!0&&(this[a]("ready",{ready:!0}),u(this[S])&&this[S]())}get rendered(){return this[l].rendered}set rendered(t){let n=this[l],r=n.rendered;n.rendered=!!t,r===!1&&n.rendered===!0&&this[a]("render",{rendered:!0})}connectedCallback(){let t=this.getBoundingClientRect(),n=getComputedStyle(this).flexDirection,r=()=>{let{width:s,height:o}=this.getBoundingClientRect(),i=getComputedStyle(this).flexDirection;(s!==t.width||o!==t.height||i!==n)&&(u(this[ne])&&this[ne](s,o,s-t.width,o-t.height),t={width:s,height:o},n=i,this[a]("resize",t)),this[l]._resizeObserver=window.requestAnimationFrame(r)};r()}disconnectedCallback(){window.cancelAnimationFrame(this[l]._resizeObserver)}};function Se(e,t){let n={name:t.name.substring(0,2)==="--"?t.name:`--${N}${t.name}`,initialValue:t.initialValue??t.value??"",syntax:t.syntax??"*",inherits:t.inherits??!0};e.prototype[P]||(e.prototype[P]={}),e.prototype[P][n.name]=n}function we(e){if(u(e.prototype[S])){let t=e.prototype[S];e.prototype[S]=G(function(){return this.rendered=!1,this.ready},z(H(async function(){return t.apply(this)},function(n){this.rendered=n!==!1,this.rendered&&u(this[O])&&this[O]()}),te))}if(u(e.prototype[O])){let t=e.prototype[O];e.prototype[O]=G(function(n){return n&&(this[l].rendered=!0),this.ready&&this[l].rendered},z(H(async function(...n){return t.apply(this,n)},function(){this[a]("refresh")}),te))}}function ze(e){we(e);let t=ee(e,{style:(...n)=>(n.forEach(r=>Se(e,Object.assign({},r))),t)});return t}U.RENDER=S;U.REFRESH=O;U.CHANGE=$;var re=e=>/^--/.test(e)?e:`--${N}${e}`;function Je(e,t,n){n=typeof n=="object"?n.name:n;let r=getComputedStyle(e).getPropertyValue(n);return(typeof r>"u"||r==="")&&t&&t.hasOwnProperty(n)?t[n].value:r}function ie(e){return e[P]||{}}function Xe(e){return Object.keys(ie(e))}function Te(e,t){let n=ie(e);return t=re(typeof t=="object"?t.name:t),n[t]}function Ye(e,...t){let n="",r="";for(let s=0;s<t.length;s++){let o=Te(e,t[s]);n+=`${n?", ":""} var(${re(o?.name||t[s])}`,r=o?.initialValue}return r&&(n+=`, ${r}`),n+=")".repeat(t.length),n}var Ae="enterViewport",Re="exitViewport",L=Symbol(),$e={root:null,rootMargin:"0px",threshold:[0,.5,.1,.15,.2,.25,.3,.35,.4,.45,.5,.55,.6,.65,.7,.75,.8,.85,.9,.95,1]};function Qe(e){e.attribute({name:"viewport-once-class",type:w,value:"",posUpdate:J}).attribute({name:"viewport-class",type:w,value:"",posUpdate:J}).attribute({name:"viewport-ratio",type:d,value:0,posUpdate:J})}function oe(e,t){t&&t.split(" ").forEach(n=>e.add(n))}function Pe(e,t){t&&t.split(" ").forEach(n=>e.remove(n))}function J(){let e=this[l],t=this.classList,n=!1;this[L]&&this[L].disconnect(),this[L]=new IntersectionObserver(r=>{r.forEach(s=>{s.isIntersecting&&s.intersectionRatio>=e.viewportRatio?n||(oe(t,e.viewportOnceClass),oe(t,e.viewportClass),n=!0,this[a](Ae)):n&&(Pe(t,e.viewportClass),n=!1,this[a](Re))})},$e),this[L].observe(this)}export{U as Base,$ as CHANGE,N as COMPONENT_PREFIX,l as CONTEXT,P as CSS_PROPS,a as FIRE_EVENT,O as REFRESH,S as RENDER,ne as RESIZE,F as Simple,ze as define,Xe as getCSSProperties,Te as getCSSProperty,ie as getCSSPropertyDescriptors,Je as getCSSPropertyValue,Ye as getCSSVar,Qe as viewport}; //# sourceMappingURL=index.js.map