{
  "version": 3,
  "sources": ["../../src/plugins/observe.resize.js"],
  "sourcesContent": ["/**\r\n * This callback is displayed as part of the Requester class.\r\n * @callback resizeObserver~callback\r\n * @param {SVGMatrix} currentMatrix\r\n * @param {SVGMatrix} prevMatrix\r\n */\r\n\r\nconst observerCache = new WeakSet();\r\n\r\n/**\r\n * resizeObserver - call the callback if the SVG is resized\r\n * @param {Object} svg\r\n */\r\nfunction observeResize (svg) {\r\n  if (observerCache.has(svg)) {\r\n    return;\r\n  }\r\n  let prevMatrix = svg.getScreenCTM();\r\n  const check    = () => {\r\n    const currentMatrix = svg.getScreenCTM();\r\n    if (currentMatrix !== null && (\r\n      currentMatrix.a !== prevMatrix.a ||\r\n      currentMatrix.b !== prevMatrix.b ||\r\n      currentMatrix.c !== prevMatrix.c ||\r\n      currentMatrix.d !== prevMatrix.d ||\r\n      currentMatrix.e !== prevMatrix.e ||\r\n      currentMatrix.f !== prevMatrix.f)\r\n    ) {\r\n      svg.dispatchEvent(new CustomEvent(\"resize\", {detail : {currentMatrix, prevMatrix}}));\r\n      prevMatrix = currentMatrix;\r\n    }\r\n    window.requestAnimationFrame(check);\r\n  };\r\n  observerCache.add(svg);\r\n  check();\r\n}\r\n\r\nfunction addEventListener(event, ...params) {\r\n  if (event === 'resize' && this.el.tagName.toLowerCase() === 'svg') {\r\n    observeResize(this.el);\r\n  }\r\n  this.el.addEventListener(event, ...params)\r\n}\r\n\r\n\r\n/**\r\n * resizeObserver plugins installer\r\n * @usage gySVG.install( resizeObserver )\r\n */\r\nexport function svgPlugin (setup) {\r\n  // Update gySVGObject\r\n  setup.extendInstance((proto) => {\r\n    const el = proto.addEventListener;\r\n    proto.addEventListener = function(...args) {\r\n      addEventListener.call(this, ...args);\r\n      if (el) {\r\n        e.call(this, ...args);\r\n      }\r\n    }\r\n  });\r\n}\r\n"],
  "mappings": "AAOA,IAAMA,EAAgB,IAAI,QAM1B,SAASC,EAAeC,EAAK,CAC3B,GAAIF,EAAc,IAAIE,CAAG,EACvB,OAEF,IAAIC,EAAaD,EAAI,aAAa,EAC5BE,EAAW,IAAM,CACrB,IAAMC,EAAgBH,EAAI,aAAa,EACnCG,IAAkB,OACpBA,EAAc,IAAMF,EAAW,GAC/BE,EAAc,IAAMF,EAAW,GAC/BE,EAAc,IAAMF,EAAW,GAC/BE,EAAc,IAAMF,EAAW,GAC/BE,EAAc,IAAMF,EAAW,GAC/BE,EAAc,IAAMF,EAAW,KAE/BD,EAAI,cAAc,IAAI,YAAY,SAAU,CAAC,OAAS,CAAC,cAAAG,EAAe,WAAAF,CAAU,CAAC,CAAC,CAAC,EACnFA,EAAaE,GAEf,OAAO,sBAAsBD,CAAK,CACpC,EACAJ,EAAc,IAAIE,CAAG,EACrBE,EAAM,CACR,CAEA,SAASE,EAAiBC,KAAUC,EAAQ,CACtCD,IAAU,UAAY,KAAK,GAAG,QAAQ,YAAY,IAAM,OAC1DN,EAAc,KAAK,EAAE,EAEvB,KAAK,GAAG,iBAAiBM,EAAO,GAAGC,CAAM,CAC3C,CAOO,SAASC,EAAWC,EAAO,CAEhCA,EAAM,eAAgBC,GAAU,CAC9B,IAAMC,EAAKD,EAAM,iBACjBA,EAAM,iBAAmB,YAAYE,EAAM,CACzCP,EAAiB,KAAK,KAAM,GAAGO,CAAI,EAC/BD,GACF,EAAE,KAAK,KAAM,GAAGC,CAAI,CAExB,CACF,CAAC,CACH",
  "names": ["observerCache", "observeResize", "svg", "prevMatrix", "check", "currentMatrix", "addEventListener", "event", "params", "svgPlugin", "setup", "proto", "el", "args"]
}
