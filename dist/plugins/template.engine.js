/* graphane - 0.1.0-alpha.11 */ (()=>{var ct="function",ft="undefined",k="object",at="string",J="array",D="number";var S=t=>typeof t===k,j=t=>typeof t===at,L=t=>typeof t===ct,Y=t=>typeof t===D&&!isNaN(t),K=t=>typeof t===ft;var T=t=>Array.isArray(t);var Z=t=>t.replace(/-([a-z0-9])/g,(e,n)=>n.toUpperCase());var V=new Map;var ut=async function(){}.constructor;function B(t,e,n=!1){let c=`${t.join(",")} ${e}`;if(V.has(c))return V.get(c);let a=new(n?ut:Function)(...t,e);return V.set(c,a),a}function U(t){try{return new Function(`let ${t} = 0`),!0}catch{return!1}}var G="animate",lt="path",q="d",Q="transform",tt="rotate",N="translate",X="inherit",v="finished",pt=[tt,"skewX","skewY"],mt=[N,"width","height","x","y","cx","cy","r","rx","ry","dx","dy"],dt=(t,e)=>["text","tspan"].includes(t)&&["x","y"].includes(e),W=!1;if(window.matchMedia){let t=window.matchMedia("(prefers-reduced-motion: reduce)");W=t.matches,t.addEventListener("change",()=>{W=t.matches})}var ht=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase();function $t(t,e={duration:200},n=null,c=null){let a=this.gSVG,l=r=>{let o=S(r)?{...r}:{duration:r};return W&&(o.duration=0),o.fill="none",o},f=r=>{r=T(r)?r:[r];let o=window.getComputedStyle(this._el),s=[],u=new Set;for(let x of r){let d={};for(let g in x){let h=Z(g);d[h]=y(x[g],h),!(h in o)||dt(this.tagName(),h)?u.add(h):h===q?d.d=`${lt}("${d.d}")`:h===Q&&(d.transform=$(d.transform))}s.push(d)}return p(u,s),s},i=[],p=(r,o)=>{if(r.size){let s=new KeyframeEffect(null,o).getKeyframes();for(let u of r){let x=a(G).attributeName(u).dur(_.duration+"ms").fill("freeze");if(o.length===1)x.to(o[0][u]);else{let d=[],g=[];for(let h in s){let st=s[h];u in o[h]&&(d.push(st.computedOffset),g.push(o[h][u]))}d[0]!==0&&(d.unshift(0),g.unshift(this[u]()||X)),d[d.length-1]!==1&&(d.push(1),g.push(this[u]()||X)),x.keyTimes(d.join(";")).values(g.join(";"))}i.push(x),x.attachTo(this),x.beginElementAt(_.delay||0)}}},$=r=>{j(r)&&(r=JSON.parse("{"+r.replace(/\s*\(\s*/g,":[").replace(/\s*\)\s*/g,"],").split(/\s*,\s*|\s.*/).join(",").replace(/(\w+):/g,'"$1":').replace(/,$/,"")+"}"));let o="";for(let s in r)if(s===tt){let u=m(r[s]);u.length>1&&(o+=`${N}(${y(u[1],N)},${y(u[2],N)}) `),o+=`${s}(${y(u[0],s)}) `,u.length>1&&(o+=`${N}(-${y(u[1],N)},-${y(u[2],N)}) `)}else o+=`${s}(${m(r[s]).map(u=>y(u,s)).join(",")}) `;return o},m=r=>T(r)?r:String(r).split(/\s+|,/),y=(r,o)=>pt.includes(o)?r+"deg":mt.includes(o)?r+"px":r,I=r=>j(r)?r.replace(/(deg)|(px)/g,"").trim():r,R=r=>r.replace(/(path\s*\(\s*["'])|(["']\s*\)\s*$)/g,"").trim().replace(/([a-zA-Z])\s*/g,"$1").replace(/\s+/g,","),b=r=>{let o=/translate\((.*)px,(.*)px\) rotate\((.*)deg\) translate\((.*)px,(.*)px\)\s+/,s=o.exec(r);return s&&Number(s[1])===Number(s[4])*-1&&Number(s[2])===Number(s[5])*-1?r=r.replace(o,`rotate(${s[3]}, ${s[1]}, ${s[2]})`):r=I(r),r},_=l(e),O=f(t),A=this._el.animate(O,_);return A.ready.then(()=>L(n)&&n.call(this,A)),A.finished.then(()=>{let r=O[O.length-1];for(let o in r){let s=ht(o);s.startsWith("text-")?this._el.style[o]=r[o]:o!=="offset"&&o in r&&this._el.setAttribute(s,s===q?R(r[o]):s===Q?b(r[o]):I(r[o]))}i.forEach(o=>{o[v](!0);let s=this._el.querySelectorAll(G),u=this._el.querySelectorAll(`${G}[${v}]`);s.length===u.length&&s.forEach(x=>x.remove())}),L(c)&&c.call(this,A)}),this}function xt(t){t.extendInstance({animateTo:$t})}var et=xt;var nt=Symbol(),rt=Symbol(),E=Symbol(),M=Symbol(),F=Symbol(),H=Symbol(),yt="unknown",P=[],gt=(t,e,n)=>{throw new Error(t+` in ${e} `+n)};function it(t){if(!t?.el?.parentNode)return;let e=document.createComment(" ref ");t.parentNode().insertBefore(e,t.el),t.remove(),e[H]=t}function Nt(t){let e=t[H];return t.parentNode.insertBefore(e.el,t),t.remove(),e}w({name:"g-content",execute(t,{expression:e,data:n,evalExpression:c}){t.content(c(e,n))}});w({name:"g-if",execute(t,{expression:e,data:n,evalExpression:c}){c(e,n)||it(t)}});w({name:"g-bind",alias:":",argument:!0,execute(t,{expression:e,argument:n,data:c,evalExpression:a}){let l={...c,$$:["d","transform"].includes(n)?t["$"+n]:()=>t[n]()};l.$$.dynamic=(i,p=200,$=0)=>{t.animateTo((T(i)?i:[i]).map(m=>S(m)&&"offset"in m?{[n]:m.value,offset:m.offset}:{[n]:m}),{duration:p,delay:$})};let f=a(e,l);if(n==="class"){if(T(f)){t.classList.add(...f.filter(i=>!!i));return}if(S(f)){Object.entries(f).forEach(([i,p])=>{p?t.classList.add(i):t.classList.remove(i)});return}f&&t.classList.add(f);return}if(n==="style"){Object.entries(f).forEach(([i,p])=>t.style[i](p));return}K(f)||t[n](f)}});w({name:"g-on",alias:"@",argument:!0,execute(t,{expression:e,argument:n,data:c,evalExpression:a,error:l,outerCode:f}){t[F]=t[F]||{};let i=t[F][n]=t[F][n]||new Map;i.has(e)&&t.removeEventListener(n,i.get(e));let p=function($){try{let m=a(e,c,t);L(m)&&m.call(t,$)}catch(m){l(m.message,`g-on:${n}="${e}"`,f)}};t.addEventListener(n,p),i.set(e,p),n==="init"&&!t[nt]&&(t[nt]=!0,t.dispatchEvent(new Event("init")))}});w({name:"g-for",template:!0,execute(t,{expression:e,data:n,error:c}){t[E]=t[E]||[];let a=0;St(e,n,l=>{if(t[E][a])C(t[E][a],l,c,!1);else{let f=t.gSVG("g");t.children().forEach(i=>{f.add(i.cloneNode(!0))}),C(f,l,c),t.before(f.el),f[rt]=!0,t[E].push(f)}a++},l=>{for(;t[E].length>l.length;)t[E].pop().remove()}),it(t)}});function w({name:t,alias:e,argument:n,template:c,execute:a}){let l=`^(${t}${n?":":""}${e?`|${e})`:")"}${n?"(.*)$":"$"}`,f=new RegExp(l,"i");P.push({name:t,alias:e,argument:n,template:c,execute:a,check:f})}function Et(t){for(let e of P){let n=e.check.exec(t);if(n){let c=n[2];return{...e,argument:c}}}}function bt(t){return t.replace(/[{}()[\]]/g,"").split(",").map(e=>e.includes(":")?e.split(":")[1]:e).map(e=>e.trim())}function At(t){return t[Symbol.iterator]?{iterator:[...t],type:J}:Y(t)?{iterator:Array(t<0?0:0|t).fill(0).map((e,n)=>n),type:D}:S(t)?{iterator:Object.entries(t).map(e=>e.reverse()),type:k}:{iterator:t,type:yt}}function ot(t,e,n=null){let c=Object.keys(e).filter(U);return B(c,`return ( ${t} ); `).apply(n,c.map(l=>e[l]))}function St(t,e,n,c){let a="__$$iterator",l="__$$callback",f="__$$final",[i,p]=t.split(" of ");i=i.trim(),p=p.trim();let $=ot(p,e)||[],{iterator:m,type:y}=At($);y===k&&!i.startsWith("[")&&(i=`[${i.replace(/(^\()|(\)$)/g,"")}]`);let I=bt(i),R=i.startsWith("(")?i:`(${i})`,b=Object.keys(e).filter(U),_=` ${a}.forEach(${R} => { ${l}({${b}${b.length?",":""}${I.join(",")}}); }); ${f}(${a}); `;return B([...b,a,l,f],_)(...b.map(A=>e[A]),m,n,c)}function C(t,e,n,c=!0){if(c&&t[rt])return;let a=t.outerHTML();t[M]=t[M]||[];let l=t.attributes();for(let i of[...l]){let p=i.name,$=Et(p);$&&(t[M].push({...$,expression:i.value}),t.removeAttribute(p))}let f=!1;for(let i of t[M]){try{i.execute(t,{...i,data:e,evalExpression:ot,error:n,outerCode:a})}catch(p){n(p.message,`${i.name}${i.argument?":"+i.argument:""}="${i.expression}"`,a)}f=i.template||f}if(!f)for(let i of t.childNodes())i.el[H]?C(Nt(i.el),e,n):i.el?.nodeType===1&&C(i,e,n)}function Tt(t={},e=gt){C(this,t,e),this.dispatchEvent(new Event("render"))}function wt(){return this.outerHTML().replaceAll("<!-- ref -->","")}function _t(t){t.install(et),t.extendInstance({render:Tt,source:wt}),t.extendSetup({extendTemplate:{defineDirective:w,obtainDirective(e){return P.find(n=>n.name===e)}}})}var z=_t;globalThis.gSVG&&globalThis.gSVG.install(z);customElements.whenDefined("g-composer").then(t=>{t.install(z)});})();