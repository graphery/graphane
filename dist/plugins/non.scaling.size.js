/* graphane - 1.0.0-beta.1 */ (()=>{var p=new WeakSet;function k(t){if(p.has(t))return;let e=t.getScreenCTM(),s=()=>{let n=t.getScreenCTM();n!==null&&(n.a!==e.a||n.b!==e.b||n.c!==e.c||n.d!==e.d||n.e!==e.e||n.f!==e.f)&&(t.dispatchEvent(new CustomEvent("resize",{detail:{currentMatrix:n,prevMatrix:e}})),e=n),window.requestAnimationFrame(s)};p.add(t),s()}function S(t){t.extendInstance(e=>{e.addEventListener=function(s,n,a){s==="resize"&&this.el.tagName.toLowerCase()==="svg"&&k(this.el),this.el.addEventListener(s,n,a)}})}var x=S;var l=Symbol(),z=t=>t?.split(/\)\s*/).filter(e=>!!e).map(e=>e.split(/\s*\(/)).reduce((e,s)=>(e[s.shift()]=s.pop().split(/,/).map(n=>Number.isNaN(Number(n))?n:Number(n)),e),{})||{};function r(t="size"){let e=this.closest("svg");return e?e._el.getRootNode()===e._el?(e.addEventListener("attach",()=>{r.call(this,t)}),this):(this[l]&&e.removeEventListener("resize",this[l]),t==="stroke"&&E(e,this),t==="size"&&(b(e,this),e.addEventListener("resize",this[l])),this):(this.top().addEventListener("attach",()=>{r.call(this,t)}),this)}function b(t,e){let s=t.getScreenCTM()||{a:1,d:1},n=e.tagName().toLowerCase(),a=n==="text"?{x:e.x(),y:e.y()}:n==="circle"?{x:e.cx(),y:e.cy()}:e.getBBox(),i=z(e.transform());i.scale||(i.scale=[1,1]),i.translate||(i.translate=[0,0]),s.a=s.a*i.scale[0],s.d=s.d*i.scale[1],e[l]=v=>{let c=v.detail.currentMatrix,d=e.transform("").transform,u=s.a/c.a,h=s.d/c.d,m=a.x*(c.a/s.a)-a.x,g=a.y*(c.d/s.d)-a.y;Object.keys(i).filter(o=>!["scale","translate"].includes(o)).forEach(o=>d[o](...i[o])),(u!==1||h!==1)&&d.scale(u,h),(m!==0||g!==0)&&d.translate(m,g)}}function E(t,e){e.vector_effect("non-scaling-stroke")}function T(t){t.install(x),t.extendInstance({keepAspect(e){return console.warn(e==="stroke"?`".keepAspect('stroke')" is deprecated; use ".vector_effect('non-scaling-stroke')" instead.`:'".keepAspect()" is deprecated; use ".nonScalingSize()" instead.'),r.call(this,e)},nonScalingSize:r}),t.extendTemplate&&(t.extendTemplate.defineDirective({name:"g-keep-aspect",execute(e,{expression:s}){console.warn('"g-keep-aspect" directive is deprecated; use "g-non-scaling-size" instead.'),e.nonScalingSize(s)}}),t.extendTemplate.defineDirective({name:"g-non-scaling-size",execute(e){r.call(e,"size")}}))}var f=T;globalThis.gSVG&&globalThis.gSVG.install(f);customElements.whenDefined("g-composer").then(t=>{t.install(f)});})();