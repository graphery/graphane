/* graphane - 0.1.0-alpha.5 */ var H="function";var P="object",V="string";var j=r=>typeof r===P,d=r=>typeof r===V,h=r=>typeof r===H;var m=r=>Array.isArray(r);var w="SVG",$="animate",Y="none",W="freeze",Z="path",_="d",I="transform",R="rotate",g="translate",q="offset",L="inherit",D="finished",Q=[R,"skewX","skewY"],X="deg",f="px",M="ms",K=["width","height"],x=!1;if(window.matchMedia){let r=window.matchMedia("(prefers-reduced-motion: reduce)");x=r.matches,r.addEventListener("change",()=>{x=r.matches})}var v=r=>r.replace(/([A-Z])/g,"-$1").toLowerCase();function tt(r,b={duration:200},N=null,S=null){let k=this.gSVG,C=t=>{let e=j(t)?{...t}:{duration:t};return x&&(e.duration=0),e.fill=Y,e},F=t=>{t=m(t)?t:[t];let e=window.getComputedStyle(this._el),n=[],i=new Set;for(let c of t){let o={...c};for(let s in o)!(s in e)||K.includes(s)?i.add(s):s===_?o.d=`${Z}("${o.d}")`:s===I&&(o.transform=z(o.transform));n.push(o)}return G(i,n),n},A=[],G=(t,e)=>{if(t.size){let n=new KeyframeEffect(null,e).getKeyframes(),i=this.closest(w)?this.closest(w).getCurrentTime()*1e3:0;for(let c of t){let o=k($).attributeName(c).dur(T.duration+M).begin((0|i+(b.delay||0))+M).fill(W);if(e.length===1)o.to(e[0][c]);else{let s=[],a=[];for(let p in n){let B=n[p];c in e[p]&&(s.push(B.computedOffset),a.push(e[p][c]))}s[0]!==0&&(s.unshift(0),a.unshift(this[c]()||L)),s[s.length-1]!==1&&(s.push(1),a.push(this[c]()||L)),o.keyTimes(s.join(";")).values(a.join(";"))}A.push(o),o.attachTo(this)}}},z=t=>{d(t)&&(t=JSON.parse("{"+t.replace(/\s*\(\s*/g,":[").replace(/\s*\)\s*/g,"],").split(/\s*,\s*|\s.*/).join(",").replace(/(\w+):/g,'"$1":').replace(/,$/,"")+"}"));let e="";for(let n in t)if(n===R){let i=y(t[n]);i.length>1&&(e+=`${g}(${i[1]}${f},${i[2]}${f}) `),e+=`${n}(${i[0]}${E(n)}) `,i.length>1&&(e+=`${g}(-${i[1]}${f},-${i[2]}${f}) `)}else e+=`${n}(${y(t[n]).map(i=>i+E(n)).join(",")}) `;return e},y=t=>m(t)?t:String(t).split(/\s+|,/),E=t=>Q.includes(t)?X:t===g?f:"",O=t=>d(t)?t.replace(/(deg)|(px)/g,"").trim():t,J=t=>t.replace(/(path\s*\(\s*["'])|(["']\s*\)\s*$)/g,"").trim().replace(/([a-zA-Z])\s*/g,"$1").replace(/\s+/g,","),U=t=>{let e=/translate\((.*)px,(.*)px\) rotate\((.*)deg\) translate\((.*)px,(.*)px\)\s+/,n=e.exec(t);return n&&Number(n[1])===Number(n[4])*-1&&Number(n[2])===Number(n[5])*-1?t=t.replace(e,`rotate(${n[3]}, ${n[1]}, ${n[2]})`):t=O(t),t},T=C(b),l=F(r),u=this._el.animate(l,T);return u.ready.then(()=>h(N)&&N.call(this,u)),u.finished.then(()=>{let t=l[l.length-1];for(let e in t){let n=v(e);n.startsWith("text-")?this._el.style[e]=t[e]:e!==q&&e in t&&this._el.setAttribute(n,n===_?J(t[e]):n===I?U(t[e]):O(t[e]))}A.forEach(e=>{e[D](!0);let n=this._el.querySelectorAll($),i=this._el.querySelectorAll(`${$}[${D}]`);n.length===i.length&&n.forEach(c=>c.remove())}),h(S)&&S.call(this,u)}),this}function rt(r){r.extendInstance({animateTo:tt})}export{rt as svgPlugin}; //# sourceMappingURL=gsvg.animateto.js.map